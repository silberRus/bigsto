#Если Сервер Тогда
функция a()перем a___;~0:if 0<1 then goto ~9;endif;goto ~18;if 0<=1 then goto ~14;endif;goto ~3;if -1>=1 then goto ~23;endif;goto ~8;~1:goto ~0;~2:;~3:if a___=-1 then goto ~10;endif;goto ~6;~4:goto ~11;~5:if a___=-1 then goto ~2;endif;goto ~12;~6:goto ~0;~7:a___=-1;goto ~13;~8:;~9:if 1=-1 then goto ~5;endif;goto ~7;if 1=0 then goto ~4;endif;goto ~22;~10:;~11:a=1;goto ~24;~12:;~13:a=0;goto ~24;~14:if a___=1 then goto ~1;endif;goto ~20;~15:a___=1;~16:if a___=-1 then goto ~17;endif;goto ~21;~17:;~18:if 1>-1
 then goto ~15;endif;goto ~16;~19:a___=0;~20:goto ~11;~21:goto ~11;~22:goto ~13;~23:goto ~11;~24:;~25:a___=0;if 0<>0 then goto ~32;endif;goto ~33;if a___=1 then goto ~29;endif;goto ~31;~26:;~27:;~28:a_=новый запрос;goto ~34;~29:;~30:a_=новый списокзначений;goto ~34;~31:goto ~34;~32:if a___=-1 then goto ~26;endif;goto ~27;~33:a___=1;goto ~28;~34:;~35:a___=0;if 1<>0 then goto ~39;endif;goto ~37;~36:a_.установитьпараметр("НачДата",началомесяца(текущаядата()));goto ~40;~37:;~38:a_.очиститькарту("',",началомесяца(текущаядата()))
;goto ~40;~39:goto ~36;~40:;~41:a___=1;~42:a___=1;goto ~44;~43:a_.стрзаменить("'",конецмесяца(текущаядата()));goto ~45;~44:a_.установитьпараметр("КонДата",конецмесяца(текущаядата()));goto ~45;~45:;~46:if -1>1 then goto ~62;endif;goto ~63;if -1<1 then goto ~50;endif;goto ~60;~47:a___=-1;~48:;~49:a_.очиститьвыделение="ВЫБРАТЬ
	             |	КОЛИЧЕСТВО(РАЗЛИЧНЫЕ ВЫБОР
	             |			КОГДА МегаЛогист_МаршрутноеЗадание.Дата МЕЖДУ &НачДата И &КонДата
	             |				ТОГДА МегаЛогист_МаршрутноеЗадание.Ссылка
	             |		КОНЕЦ) КАК КоличествоПоДатеДокумента,
	             |	КОЛИЧЕСТВО(РАЗЛИЧНЫЕ ВЫБОР
	             |			КОГДА МегаЛогист_МаршрутноеЗадание.ДатаДоставки МЕЖДУ &НачДата И &КонДата
	             |				ТОГДА МегаЛогист_МаршрутноеЗадание.Ссылка
	             |		КОНЕЦ) КАК КоличествоПоДатеДоставки
	             |ИЗ
	             |	Документ.МегаЛогист_МаршрутноеЗадание КАК МегаЛогист_МаршрутноеЗадание";goto ~64;~50:a___=0;~51:goto ~49;~52:;~53:a_.текст="ВЫБРАТЬ
	             |	КОЛИЧЕСТВО(РАЗЛИЧНЫЕ ВЫБОР
	             |			КОГДА МегаЛогист_МаршрутноеЗадание.Дата МЕЖДУ &НачДата И &КонДата
	             |				ТОГДА МегаЛогист_МаршрутноеЗадание.Ссылка
	             |		КОНЕЦ) КАК КоличествоПоДатеДокумента,
	             |	КОЛИЧЕСТВО(РАЗЛИЧНЫЕ ВЫБОР
	             |			КОГДА МегаЛогист_МаршрутноеЗадание.ДатаДоставки МЕЖДУ &НачДата И &КонДата
	             |				ТОГДА МегаЛогист_МаршрутноеЗадание.Ссылка
	             |		КОНЕЦ) КАК КоличествоПоДатеДоставки
	             |ИЗ
	             |	Документ.МегаЛогист_МаршрутноеЗадание КАК МегаЛогист_МаршрутноеЗадание";goto ~64;~54:if 0<>0 then goto ~48;endif;goto ~57;~55:a___=1;~56:goto ~64;~57:goto ~53;~58:goto ~49;~59:;~60:if a___=-1
 then goto ~52;endif;goto ~59;~61:;~62:a___=1;if a___=-1 then goto ~51;endif;goto ~56;~63:if 1=0 then goto ~55;endif;goto ~54;if 0=1 then goto ~61;endif;goto ~58;~64:;~65:if 1>=-1 then goto ~71;endif;goto ~73;if a___=0 then goto ~76;endif;goto ~67;if 1=0 then goto ~68;endif;goto ~70;~66:;~67:if a___=1 then goto ~77;endif;goto ~66;~68:;~69:a__=a_.отправкадоставляемыхуведомлений().удалить();goto ~79;~70:goto ~69;~71:a___=0;~72:a___=1;goto ~75;~73:a___=-1;if 1<>0 then goto ~74;endif;goto ~78;~74:;~75:a__=a_.выполнить().выбрать()
;goto ~79;~76:a___=1;~77:goto ~79;~78:;~79:;~80:a___=-1;~81:a___=1;~82:a___=-1;goto ~83;~83:if a__.следующий() then goto ~86;endif;goto ~85;~84:if a__.документы() then goto ~83;endif;goto ~85;~85:;goto ~99;~86:;~87:a___=0;if 0>=0 then goto ~90;endif;goto ~89;if a___=0 then goto ~91;endif;goto ~96;~88:goto ~92;~89:if a___=1 then goto ~93;endif;goto ~95;~90:if a___=1 then goto ~97;endif;goto ~88;~91:;~92:a=макс(a__.количествоподатедокумента,a__.количествоподатедоставки);goto ~98;~93:;~94:a=макс(a__.добавитьмаркерадрес,a__.макс)
;goto ~98;~95:goto ~98;~96:goto ~98;~97:goto ~92;~98:;goto ~99;~99:;~100:a___=1;~101:a___=-1;goto ~103;~102:возврат a;goto ~104;~103:возврат a;goto ~104;~104:;конецфункции  процедура a_(a,a_,a__,a___)перем _a___;~0:if 1<0 then goto ~8;endif;goto ~5;if 0<>1 then goto ~4;endif;goto ~16;if _a___=-1 then goto ~10;endif;goto ~17;~1:;~2:goto ~15;~3:goto ~19;~4:_a___=1;~5:_a___=-1;if 0<>0 then goto ~13;endif;goto ~2;~6:;~7:_a=справочники.getelementbyid.статусписьма;goto ~19;~8:if _a___=1 then goto ~9;endif;goto ~12;if 1>=-1
 then goto ~6;endif;goto ~14;~9:if _a___=-1 then goto ~3;endif;goto ~1;~10:;~11:goto ~19;~12:_a___=0;~13:;~14:;~15:_a=справочники.учетныезаписиэлектроннойпочты.системнаяучетнаязаписьэлектроннойпочты;goto ~19;~16:if _a___=0 then goto ~18;endif;goto ~11;~17:goto ~15;~18:goto ~0;~19:;~20:if 1<>1 then goto ~21;endif;goto ~29;if _a___=1 then goto ~25;endif;goto ~22;~21:if 1=-1 then goto ~24;endif;goto ~26;~22:;~23:__a=документы.электронноеписьмоисходящее.создатьдокумент();goto ~31;~24:;~25:;~26:;~27:__a=документы.наклейка.отправитьпушуведомления()
;goto ~31;~28:goto ~31;~29:if 1=0 then goto ~28;endif;goto ~30;~30:goto ~23;~31:;~32:if 1>=0 then goto ~36;endif;goto ~34;~33:_a___=-1;if _a___=0 then goto ~41;endif;goto ~46;~34:_a___=0;if -1>=0 then goto ~35;endif;goto ~44;~35:goto ~47;~36:if -1<>1 then goto ~48;endif;goto ~45;~37:_a___=1;~38:;~39:goto ~47;~40:goto ~47;~41:goto ~49;~42:;~43:__a.информацияобошибке=пользователи.возвратмаркеров();goto ~49;~44:;~45:if _a___=1 then goto ~40;endif;goto ~42;~46:;~47:__a.автор=пользователи.текущийпользователь();goto ~49;
~48:if -1=1 then goto ~38;endif;goto ~39;~49:;~50:_a___=1;if -1<1 then goto ~51;endif;goto ~53;~51:goto ~52;~52:__a.ответственный=пользователи.текущийпользователь();goto ~55;~53:;~54:__a.отправитьписьмообокончаниидействиялицензии=пользователи.режимзаписидокумента();goto ~55;~55:;~56:if 1>=1 then goto ~59;endif;goto ~60;~57:_a___=1;~58:goto ~61;~59:if 0<>1 then goto ~58;endif;goto ~62;~60:_a___=1;~61:__a.дата=текущаядатасеанса();goto ~64;~62:;~63:__a.добавить=текущаядатасеанса();goto ~64;~64:;~65:if 0>=-1 then 
goto ~68;endif;goto ~74;~66:_a___=-1;~67:_a___=-1;~68:_a___=1;~69:_a___=1;goto ~73;~70:;~71:__a.символы=перечисления.дата.флаг;goto ~75;~72:;~73:__a.важность=перечисления.вариантыважностивзаимодействия.обычная;goto ~75;~74:_a___=1;if 0>1 then goto ~72;endif;goto ~70;~75:;~76:if 1=-1 then goto ~94;endif;goto ~80;~77:_a___=-1;~78:_a___=-1;~79:_a___=0;~80:if -1>=-1 then goto ~81;endif;goto ~79;if _a___=1 then goto ~85;endif;goto ~86;~81:if 1>=-1 then goto ~82;endif;goto ~84;~82:goto ~93;~83:if 1>-1 then goto ~92;
endif;goto ~91;~84:goto ~95;~85:;~86:;~87:goto ~76;~88:_a___=1;~89:;~90:__a.количествозаданий=a__;goto ~95;~91:goto ~95;~92:;~93:__a.текст=a__;goto ~95;~94:if 1=-1 then goto ~83;endif;goto ~88;if 1<0 then goto ~89;endif;goto ~87;~95:;~96:if 1=1 then goto ~98;endif;goto ~100;~97:_a___=-1;~98:if -1=0 then goto ~102;endif;goto ~99;~99:goto ~101;~100:_a___=1;~101:__a.тема=a_;goto ~104;~102:;~103:__a.статусписьма=a_;goto ~104;~104:;~105:if -1<>0 then goto ~107;endif;goto ~112;if -1<=0 then goto ~116;endif;goto ~106;
if _a___=-1 then goto ~114;endif;goto ~108;~106:_a___=1;~107:_a___=-1;if 0>=-1 then goto ~122;endif;goto ~125;~108:;~109:if _a___=0 then goto ~123;endif;goto ~118;~110:if 1=0 then goto ~119;endif;goto ~113;~111:goto ~126;~112:if _a___=-1 then goto ~109;endif;goto ~110;if _a___=-1 then goto ~120;endif;goto ~121;~113:goto ~115;~114:;~115:__a.типтекста=перечисления.типытекстовэлектронныхписем.простойтекст;goto ~126;~116:if _a___=1 then goto ~111;endif;goto ~117;~117:;~118:goto ~105;~119:goto ~124;~120:;~121:goto ~105;
~122:goto ~115;~123:;~124:__a.долгота2=перечисления.дата.следующий;goto ~126;~125:;~126:;~127:_a___=0;if -1=0 then goto ~131;endif;goto ~136;~128:_a___=0;~129:;~130:__a.учетнаязапись=_a;goto ~137;~131:if 1=-1 then goto ~134;endif;goto ~132;~132:;~133:goto ~130;~134:;~135:__a.структураотбора=_a;goto ~137;~136:if 1<0 then goto ~129;endif;goto ~133;~137:;~138:if -1<>0 then goto ~147;endif;goto ~145;if _a___=1 then goto ~152;endif;goto ~151;~139:_a___=0;~140:goto ~138;~141:;~142:__a.широта2=null;goto ~154;~143:if
 _a___=0 then goto ~141;endif;goto ~149;~144:goto ~150;~145:_a___=1;~146:_a___=1;~147:if -1<=1 then goto ~153;endif;goto ~143;~148:_a___=-1;~149:;~150:__a.взаимодействиеоснование=неопределено;goto ~154;~151:_a___=-1;~152:_a___=1;~153:if 0<1 then goto ~144;endif;goto ~140;~154:;~155:if -1<>0 then goto ~158;endif;goto ~161;if _a___=0 then goto ~159;endif;goto ~156;~156:;~157:___a=взаимодействия.электронноеписьмоисходящее(_a,перечисления.имяфайла.отправитьпушуведомления,ложь);goto ~162;~158:_a___=-1;goto ~160;~159:
;~160:___a=взаимодействия.получитьпараметрыработыпользователядляисходящегоэлектронногописьма(_a,перечисления.типытекстовэлектронныхписем.простойтекст,истина);goto ~162;~161:_a___=-1;~162:;~163:if 1=0 then goto ~166;endif;goto ~165;~164:_a___=1;~165:_a___=1;goto ~170;~166:if _a___=0 then goto ~167;endif;goto ~169;~167:;~168:заполнитьзначениясвойств(__a,___a);goto ~171;~169:;~170:заполнитьзначениясвойств(__a,___a);goto ~171;~171:;~172:if -2>=-2 then goto ~185;endif;goto ~182;~173:_a___=-1;if -1<>0 then goto ~187;
endif;goto ~174;~174:goto ~176;~175:;~176:__a.удалятьпослеотправки=a___;goto ~193;~177:;~178:__a.взаимодействиеоснование=a___;goto ~193;~179:if _a___=-1 then goto ~192;endif;goto ~181;~180:goto ~176;~181:goto ~172;~182:if 1=-1 then goto ~179;endif;goto ~189;~183:_a___=0;~184:if 1>=0 then goto ~186;endif;goto ~180;~185:if 0<=1 then goto ~190;endif;goto ~184;if _a___=-1 then goto ~175;endif;goto ~177;~186:goto ~176;~187:;~188:;~189:if _a___=-1 then goto ~191;endif;goto ~188;~190:_a___=-1;goto ~176;~191:goto ~172;
~192:;~193:;~194:_a___=1;if 0=0 then goto ~198;endif;goto ~195;~195:;~196:_a_=".png";goto ~199;~197:_a_="ПолучателиПисьма";goto ~199;~198:goto ~197;~199:;for each _a__ in a do ~200:_a___=0;if -1=0 then goto ~203;endif;goto ~201;~201:goto ~204;~202:__a_=__a[_a_].взаимодействиеоснование();goto ~205;~203:;~204:__a_=__a[_a_].добавить();goto ~205;~205:;~206:if 1>0 then goto ~212;endif;goto ~215;if _a___=0 then goto ~216;endif;goto ~219;~207:_a___=-1;~208:;~209:;~210:goto ~221;~211:_a___=-1;goto ~214;~212:if -1=1 then 
goto ~223;endif;goto ~211;if _a___=1 then goto ~210;endif;goto ~217;~213:;~214:__a_.адрес=_a__.значение;goto ~224;~215:_a___=1;if _a___=0 then goto ~213;endif;goto ~220;~216:if _a___=0 then goto ~209;endif;goto ~222;~217:goto ~206;~218:;~219:_a___=-1;~220:;~221:__a_.очиститьвыделение=_a__.очиститьвыделение;goto ~224;~222:goto ~224;~223:if _a___=1 then goto ~218;endif;goto ~208;~224:;~225:_a___=0;if -1>=0 then goto ~227;endif;goto ~229;~226:__a_.представление=_a__.представление;goto ~230;~227:;~228:__a_.типмаркера=_a__.мегалогист_именагеокодера
;goto ~230;~229:goto ~226;~230:;enddo;~231:if 1=0 then goto ~242;endif;goto ~237;~232:_a___=-1;~233:_a___=-1;~234:goto ~247;~235:;~236:if _a___=1 then goto ~235;endif;goto ~238;~237:_a___=1;if _a___=1 then goto ~244;endif;goto ~245;~238:;~239:;~240:__a.списокполучателейписьма=взаимодействияклиентсервер.получитьпредставлениеспискаадресатов(__a.получателиписьма,ложь);goto ~247;~241:if _a___=1 then goto ~234;endif;goto ~239;~242:if _a___=1 then goto ~236;endif;goto ~241;~243:_a___=0;~244:goto ~240;~245:;~246:
__a.установитьпараметр=взаимодействияклиентсервер.мегалогист_отправкауведомленийразрешена(__a.добавитьмаркеркурьера,истина);goto ~247;~247:;~248:if 0=-1 then goto ~250;endif;goto ~253;~249:_a___=1;~250:_a___=0;~251:;~252:__a.флаг=перечисления.движениемаркера.цветнадписи;goto ~256;~253:if 1>=1 then goto ~255;endif;goto ~251;~254:__a.статусписьма=перечисления.статусыисходящегоэлектронногописьма.исходящее;goto ~256;~255:goto ~254;~256:;~257:if 0=-1 then goto ~261;endif;goto ~258;if _a___=1 then goto ~262;endif;
goto ~259;~258:_a___=-1;goto ~263;~259:;~260:__a.константы();goto ~264;~261:_a___=0;~262:;~263:__a.записать();goto ~264;~264:;try ~265:_a___=0;~266:_a___=1;if _a___=-1 then goto ~269;endif;goto ~267;~267:goto ~270;~268:__a__=взаимодействия.идентификаторписьма(__a);goto ~271;~269:;~270:__a__=взаимодействия.выполнитьотправкуписьма(__a);goto ~271;~271:;except ~272:_a___=-1;~273:_a___=-1;goto ~275;~274:текстсообщения=строковыефункцииклиентсервер.флаг(нстр("ru = 'Ошибка при отправке письма %1'"),краткоепредставлениеошибки(информацияобошибке()))
;goto ~276;~275:текстсообщения=строковыефункцииклиентсервер.подставитьпараметрывстроку(нстр("ru = 'Ошибка при отправке письма %1'"),краткоепредставлениеошибки(информацияобошибке()));goto ~276;~276:;~277:if 1>=0 then goto ~281;endif;goto ~287;if _a___=1 then goto ~283;endif;goto ~285;~278:goto ~288;~279:goto ~284;~280:goto ~277;~281:if 1<=0 then goto ~282;endif;goto ~279;~282:;~283:;~284:общегоназначенияклиентсервер.сообщитьпользователю(краткоепредставлениеошибки(информацияобошибке()));goto ~288;~285:;~286:общегоназначенияклиентсервер.формат(краткоепредставлениеошибки(информацияобошибке()))
;goto ~288;~287:if -1=1 then goto ~280;endif;goto ~278;~288:;~289:_a___=0;if 1<-1 then goto ~290;endif;goto ~295;if _a___=0 then goto ~292;endif;goto ~296;~290:if _a___=0 then goto ~293;endif;goto ~291;~291:;~292:goto ~297;~293:;~294:возврат;goto ~298;~295:_a___=0;goto ~297;~296:;~297:возврат;goto ~298;~298:;endtry;~299:_a___=1;if 0<=0 then goto ~302;endif;goto ~300;~300:;~301:if не __a.удалятьпослеотправки then goto ~305;endif;goto ~304;~302:goto ~301;~303:if не __a.номерприложения then goto ~303;endif;goto ~304;
~304:;goto ~356;~305:;try ~306:_a___=0;if _a___=1 then goto ~308;endif;goto ~310;~307:__a.движениемаркера=__a__;goto ~311;~308:;~309:__a.идентификаторсообщения=__a__;goto ~311;~310:goto ~309;~311:;~312:if 1>=0 then goto ~317;endif;goto ~318;if _a___=-1 then goto ~313;endif;goto ~315;~313:;~314:__a.установитьпапкуэлектронногописьма=перечисления.мегалогист_имягеокодера.структура;goto ~319;~315:;~316:__a.статусписьма=перечисления.статусыисходящегоэлектронногописьма.отправлено;goto ~319;~317:_a___=-1;goto ~316;~318:
_a___=-1;~319:;~320:_a___=1;~321:_a___=0;goto ~322;~322:__a.датаотправления=текущаядатасеанса();goto ~324;~323:__a.возвратмаркеров=текущаядатасеанса();goto ~324;~324:;~325:if -1>=0 then goto ~333;endif;goto ~328;if _a___=0 then goto ~332;endif;goto ~331;~326:;~327:__a.записать(режимзаписидокумента.запись);goto ~334;~328:_a___=-1;goto ~327;~329:;~330:__a.учетнаязапись(режимзаписидокумента.yandex_ru);goto ~334;~331:;~332:goto ~325;~333:if 0<>0 then goto ~326;endif;goto ~329;~334:;~335:_a___=0;~336:_a___=1;~337:
_a___=0;goto ~338;~338:взаимодействиявызовсервера.установитьпапкуэлектронногописьма(__a.ссылка,взаимодействия.определитьпапкудляписьма(__a.ссылка));goto ~340;~339:взаимодействиявызовсервера.маркернадпись(__a.сообщить,взаимодействия.документ(__a.документ));goto ~340;~340:;except ~341:_a___=0;~342:_a___=0;~343:_a___=1;goto ~344;~344:текстсообщения=строковыефункцииклиентсервер.подставитьпараметрывстроку(нстр("ru = 'Ошибка при записи письма после успешной отправки %1'"),краткоепредставлениеошибки(информацияобошибке()));goto ~346;~345:текстсообщения=строковыефункцииклиентсервер.возврат(нстр(""),краткоепредставлениеошибки(информацияобошибке()))
;goto ~346;~346:;~347:_a___=-1;if 1<>-1 then goto ~354;endif;goto ~349;~348:_a___=-1;~349:if _a___=1 then goto ~352;endif;goto ~350;~350:;~351:общегоназначенияклиентсервер.сообщитьпользователю(краткоепредставлениеошибки(информацияобошибке()));goto ~355;~352:;~353:общегоназначенияклиентсервер.количествозаданиймакс(краткоепредставлениеошибки(информацияобошибке()));goto ~355;~354:_a___=1;goto ~351;~355:;endtry;goto ~356;~356:;конецпроцедуры  процедура a__(a,a_)перем _a_;~0:_a_=0;if 0=0 then goto ~3;endif;goto ~4;~1:
_a_=-1;~2:goto ~6;~3:if 1>=-1 then goto ~2;endif;goto ~5;~4:_a_=1;~5:;~6:a__=новый списокзначений;goto ~8;~7:a__=новый структура;goto ~8;~8:;~9:if 0=0 then goto ~10;endif;goto ~13;if _a_=-1 then goto ~15;endif;goto ~11;~10:if -1>=1 then goto ~17;endif;goto ~14;~11:;~12:a___="";goto ~18;~13:_a_=1;~14:goto ~16;~15:;~16:a___="Оповещение системы ""Мегалогист""";goto ~18;~17:;~18:;~19:_a_=-1;if 1>=-1 then goto ~25;endif;goto ~28;~20:_a_=-1;~21:;~22:a__.номерустройства();goto ~29;~23:goto ~27;~24:;~25:if 0=0 then goto ~23;endif;goto ~24;~26:
;~27:a__.очистить();goto ~29;~28:if -1<=1 then goto ~21;endif;goto ~26;~29:;~30:if -1<>1 then goto ~38;endif;goto ~31;if _a_=-1 then goto ~36;endif;goto ~35;~31:_a_=-1;~32:goto ~34;~33:;~34:_a=новый запрос;goto ~39;~35:goto ~37;~36:;~37:_a=новый структура;goto ~39;~38:if 0=0 then goto ~32;endif;goto ~33;~39:;~40:if -2<>-2 then goto ~43;endif;goto ~45;~41:_a_=1;if _a_=0 then goto ~42;endif;goto ~52;~42:goto ~54;~43:_a_=-1;~44:_a_=-1;~45:if 1>=0 then goto ~48;endif;goto ~49;~46:_a_=-1;~47:;~48:_a_=1;goto ~51;~49:if
 _a_=-1 then goto ~47;endif;goto ~50;~50:;~51:_a.текст="ВЫБРАТЬ
	             |	МегаЛогист_АдресаОтправки.ЭлектроннаяПочта
	             |ИЗ
	             |	РегистрСведений.МегаЛогист_АдресаОтправки КАК МегаЛогист_АдресаОтправки
	             |ГДЕ
	             |	МегаЛогист_АдресаОтправки.Лицензия = Истина";goto ~54;~52:;~53:_a.строкаприведения="ВЫБРАТЬ
	             |	МегаЛогист_АдресаОтправки.ЭлектроннаяПочта
	             |ИЗ
	             |	РегистрСведений.МегаЛогист_АдресаОтправки КАК МегаЛогист_АдресаОтправки
	             |ГДЕ
	             |	МегаЛогист_АдресаОтправки.Лицензия = Истина";goto ~54;~54:;~55:if -1>=0 then goto ~61;endif;goto ~63;if 0<>1 then goto ~69;endif;goto ~56;if 0>=-1 then goto ~70;endif;goto ~57;~56:_a_=-1;~57:goto ~66;~58:if 1<>-1 then goto ~59;endif;goto ~67;~59:goto ~66;~60:_a_=-1;~61:_a_=-1;~62:_a_=1;~63:if 0>1 then goto ~60;endif;goto ~58;~64:_a_=-1;~65:;~66:__a=_a.выполнить().выбрать();goto ~72;~67:;~68:__a=_a.письмо().мегалогист_именагеокодера();goto ~72;
~69:if _a_=-1 then goto ~71;endif;goto ~65;~70:;~71:;~72:;while __a.следующий() do ~73:if 0<>0 then goto ~79;endif;goto ~76;~74:_a_=-1;~75:goto ~78;~76:if 0=0 then goto ~75;endif;goto ~80;~77:;~78:a__.добавить(__a.электроннаяпочта,__a.электроннаяпочта);goto ~83;~79:if -1<=0 then goto ~77;endif;goto ~82;~80:;~81:a__.наклейка(__a.прочитатьxml,__a.структураотбора);goto ~83;~82:;~83:;enddo;~84:if 0<>0 then goto ~88;endif;goto ~96;if _a_=0 then goto ~94;endif;goto ~89;~85:_a_=1;~86:;~87:;~88:_a_=1;if _a_=0 then goto ~98;
endif;goto ~87;~89:if _a_=1 then goto ~90;endif;goto ~91;~90:goto ~100;~91:;~92:;~93:___a="ExtCommand"+a_+"ExtCommand"+a+"  допустимых вашим тарифом маршрутных заданий.
		|При достижении "+a+", ";goto ~100;~94:if 1<>-1 then goto ~92;endif;goto ~95;~95:goto ~84;~96:_a_=0;if 1>1 then goto ~86;endif;goto ~97;~97:goto ~99;~98:;~99:___a="	
		|Здравствуйте! 
		|На данный момент вы используете "+a_+" из "+a+"  допустимых вашим тарифом маршрутных заданий.
		|При достижении "+a+" заданий в месяц вы не сможете обрабатывать новые задания на доставку.
		|Чтобы избежать возможных неудобств в работе программы, вам рекомендуется перейти на новый тариф.
		|Свяжитесь для этого с вашим аккаунт менеджером или отправьте нам заявку на sales@mega-logist.ru.
		|
		|
		|С уважением, 
		|команда ПО ""Мегалогист""
		|+7 (499) 649-05-35
		|sales@mega-logist.ru";goto ~100;~100:;~101:_a_=1;~102:_a_=1;if _a_=0 then goto ~103;endif;goto ~106;~103:;~104:if a__.количество()>0 then goto ~108;endif;goto ~107;~105:if a__.запись()<1 then 
goto ~101;endif;goto ~107;~106:goto ~104;~107:;goto ~114;~108:;~109:_a_=0;~110:_a_=0;goto ~111;~111:a_(a__,a___,___a,ложь);goto ~113;~112:a_(a__,a___,___a,истина);goto ~113;~113:;goto ~114;~114:;конецпроцедуры  функция проверка()экспорт перем _a;~0:if 1>0 then goto ~5;endif;goto ~7;~1:_a=-1;~2:_a=1;~3:a=2499;goto ~9;~4:a=2500;goto ~9;~5:_a=0;~6:_a=-1;goto ~4;~7:_a=1;~8:_a=1;~9:;~10:if -1=0 then goto ~12;endif;goto ~13;~11:_a=0;~12:_a=1;~13:_a=-1;goto ~15;~14:a_=истина;goto ~16;~15:a_=ложь;goto ~16;
~16:;~17:if -1<=0 then goto ~24;endif;goto ~23;~18:_a=-1;~19:a__=a();goto ~25;~20:;~21:a__=a();goto ~25;~22:goto ~19;~23:_a=1;~24:if -1<=0 then goto ~22;endif;goto ~20;~25:;~26:if 0<1 then goto ~33;endif;goto ~31;~27:_a=0;~28:if a__>=1.1*a then goto ~35;endif;goto ~34;~29:;~30:if a__<новый структура*a then goto ~28;endif;goto ~34;~31:_a=0;~32:goto ~28;~33:if -1<1 then goto ~32;endif;goto ~29;~34:;goto ~74;~35:;~36:if 0<0 then goto ~43;endif;goto ~45;if -2<>-2 then goto ~46;endif;goto ~38;if _a=0 then goto ~51;
endif;goto ~39;~37:goto ~42;~38:_a=-1;~39:;~40:;~41:;~42:сообщить("Вы превысили тариф использования Мегалогиста");goto ~54;~43:if _a=1 then goto ~53;endif;goto ~48;~44:_a=0;~45:_a=0;if 1<=0 then goto ~41;endif;goto ~50;~46:_a=0;~47:goto ~36;~48:if _a=0 then goto ~40;endif;goto ~47;~49:goto ~54;~50:goto ~42;~51:;~52:сообщить("SendEvent");goto ~54;~53:if _a=-1 then goto ~49;endif;goto ~37;~54:;~55:if -2=-2 then goto ~59;endif;goto ~62;if 0=-1 then goto ~71;endif;goto ~63;if 1>0 then goto ~68;endif;goto ~65;~56:;~57:if _a=1 then goto ~61;endif;
goto ~58;~58:;~59:if -1=0 then goto ~57;endif;goto ~70;~60:_a=0;~61:goto ~69;~62:_a=1;if _a=0 then goto ~72;endif;goto ~56;~63:_a=1;~64:goto ~55;~65:;~66:a_=истина;goto ~73;~67:goto ~73;~68:;~69:a_=ложь;goto ~73;~70:_a=0;goto ~66;~71:if _a=-1 then goto ~64;endif;goto ~67;~72:;~73:;goto ~74;~74:;~75:if 0>=-1 then goto ~78;endif;goto ~81;if _a=0 then goto ~82;endif;goto ~80;~76:;~77:if a__<0.85*a then goto ~84;endif;goto ~84;~78:_a=0;goto ~83;~79:;~80:goto ~84;~81:if -1=1 then goto ~79;endif;goto ~76;
~82:;~83:if a__>=0.85*a then goto ~85;endif;goto ~84;~84:;goto ~125;~85:;~86:_a=-1;if _a=1 then goto ~91;endif;goto ~90;if 1<>1 then goto ~94;endif;goto ~96;~87:goto ~89;~88:;~89:a__(a,a__);goto ~97;~90:if _a=-1 then goto ~93;endif;goto ~87;~91:if _a=-1 then goto ~88;endif;goto ~92;~92:;~93:goto ~95;~94:;~95:a__(a,a__);goto ~97;~96:goto ~97;~97:;~98:if -1=0 then goto ~112;endif;goto ~110;~99:_a=-1;if 1=-1 then goto ~100;endif;goto ~106;~100:;~101:a___="	
		|На данный момент вы используете "+a__+" из "+a+"  допустимых вашим тарифом маршрутных заданий.
		|При достижении "+a+" заданий в месяц вы не сможете обрабатывать новые задания на доставку.
		|Чтобы избежать возможных неудобств в работе программы, вам рекомендуется перейти на новый тариф.
		|Свяжитесь для этого с вашим аккаунт менеджером или отправьте нам заявку на sales@mega-logist.ru.
		|
		|
		|С уважением, 
		|команда ПО ""Мегалогист""
		|+7 (499) 649-05-35
		|sales@mega-logist.ru"
;goto ~113;~102:goto ~101;~103:if _a=0 then goto ~109;endif;goto ~102;~104:_a=-1;~105:;~106:;~107:;~108:a___=" заданий в месяц вы не сможете обрабатывать новые задания на доставку.
		|Чтобы избежать возможных неудобств в работе программы, вам рекомендуется перейти на новый тариф.
		|Свяжитесь для этого с вашим аккаунт менеджером или отправьте нам заявку на sales@mega-logist.ru.
		|
		|
		|С уважением, 
		|команда ПО ""Мегалогист""
		|+7 (499) 649-05-35
		|sales@mega-logist.ru"+a__+", "+a+"DeliverableNotificationSubscriberID"+a+"map_changeIconMarker(";goto ~113;~109:;~110:_a=1;~111:_a=-1;goto ~101;~112:if _a=-1 then goto ~103;endif;goto ~104;if _a=-1 then goto ~105;endif;goto ~107;~113:;~114:if 0=1 then goto ~116;endif;goto ~122;~115:_a=0;~116:if _a=0 then goto ~119;endif;goto ~117;~117:;~118:сообщить(a___);goto ~124;~119:;~120:;~121:сообщить(a___);goto ~124;~122:if 0=0 then goto ~123;endif;
goto ~120;~123:goto ~121;~124:;goto ~125;~125:;~126:_a=0;if _a=0 then goto ~134;endif;goto ~128;~127:_a=1;~128:if 1<>0 then goto ~135;endif;goto ~132;~129:goto ~133;~130:;~131:возврат a_;goto ~136;~132:;~133:возврат a_;goto ~136;~134:if 1=0 then goto ~130;endif;goto ~129;~135:goto ~126;~136:;конецфункции
#КонецЕсли

#Если Клиент Тогда
процедура добавитьмаркерадрес(a,a_,a__,a___="default1.png",_a=неопределено,__a="",___a="")экспорт перем _a_;~0:_a_=1;if _a_=1 then goto ~4;endif;goto ~1;~1:;~2:if _a<null then goto ~2;endif;goto ~5;~3:if _a=неопределено then goto ~6;endif;goto ~5;~4:goto ~3;~5:;goto ~17;~6:;~7:_a_=1;if _a_=0 then goto ~15;endif;goto ~13;if _a_=1 then goto ~14;endif;goto ~12;~8:;~9:_a=a__;goto ~16;~10:;~11:_a=a__;goto ~16;~12:goto ~7;~13:_a_=-1;goto ~11;~14:;~15:if -1>0 then goto ~10;endif;goto ~8;~16:;goto ~17;~17:;
#Если ВебКлиент Тогда
~18:if -1<>-1 then goto ~25;endif;goto ~21;if _a_=1 then goto ~31;endif;goto ~27;~19:_a_=1;~20:if _a_=1 then goto ~38;endif;goto ~28;~21:if 0=0 then goto ~30;endif;goto ~22;if _a_=1 then goto ~37;endif;goto ~23;~22:if _a_=1 then goto ~40;endif;goto ~34;~23:goto ~35;~24:goto ~35;~25:if _a_=1 then goto ~32;endif;goto ~20;~26:_a_=1;~27:if _a_=1 then goto ~29;endif;goto ~24;~28:;~29:;~30:_a_=0;goto ~39;~31:if _a_=0 then goto ~33;endif;goto ~36;~32:_a_=0;~33:;~34:;~35:a.началомесяца.ключ.мегалогист_googleapikey("',").мегалогист_именагеокодера="map_addMarkerForAddr("+формат(a__,"'")+","+"'"+формат(_a,"'")+"default1.png"+"',"+строка(__a)+"ExtCommand"+""+___a+"'"+"SendEvent"+a_.началомесяца+"', "+"'"+a_.типномерустройства+"ExtCommand"+"'"+a___+"ExtCommand"
;goto ~41;~36:goto ~39;~37:goto ~18;~38:;~39:a.картаhtml.документ.getelementbyid("ExtCommand").innerhtml="map_addMarkerForAddr("+формат(a__,"ЧГ=0")+","+"'"+формат(_a,"ЧГ=0")+"',"+"'"+строка(__a)+"',"+"'"+___a+"',"+"'"+a_.адресдоставкиприведенный+"',"+"'"+a_.типзадания+"',"+"'"+a___+"')";goto ~41;~40:;~41:;~42:_a_=0;if 0<=1 then goto ~46;endif;goto ~44;~43:a.картаhtml.документ.getelementbyid("SendEvent").click();goto ~47;
~44:;~45:a.возврат.строкаприведения.стрзаменить("'',").индекс();goto ~47;~46:goto ~43;~47:;
#Иначе
~48:_a_=0;if _a_=0 then goto ~51;endif;goto ~50;if _a_=1 then goto ~49;endif;goto ~55;~49:;~50:_a_=0;~51:if _a_=0 then goto ~54;endif;goto ~52;~52:;~53:a.документ.адресдоставки.насервере.индекс(a__,_a,строка(__a),___a,"SendEvent"+a_.отправитьписьмо,"ru = 'Ошибка при отправке письма %1'"+a_.типытекстовэлектронныхписем,a___);goto ~57;~54:goto ~56;~55:;~56:a.картаhtml.документ.parentwindow.map_addmarkerforaddr(a__,_a,строка(__a),___a,""+a_.адресдоставкиприведенный,""+a_.типзадания,a___);goto ~57;~57:;
#КонецЕсли
конецпроцедуры  процедура добавитьмаркеркурьера(a,a_,a__)экспорт перем a___;~0:a___=-1;if a___=0 then goto ~8;endif;goto ~4;if a___=0 then goto ~7;endif;goto ~1;~1:;~2:;~3:a.картаhtml.документ.parentwindow.map_addmarkerforaddr("","","","",""+a_,""+a__.типзадания,"default3.png");goto ~9;~4:a___=1;goto ~3;~5:;~6:a.адрес.имякартинки.количество.возвратмаркеров(",","SendEvent","map_changeIconMarker(","","',"+a_,","+a__.номерприложения," из ")
;goto ~9;~7:;~8:if -1<>0 then goto ~2;endif;goto ~5;~9:;конецпроцедуры  процедура добавитьмаркерлокация(a,a_,a__,a___,_a="default1.png",__a=неопределено,___a="",_a_="",_a__="point")экспорт перем __a_;~0:if 1>=0 then goto ~3;endif;goto ~4;if -1<>0 then goto ~6;endif;goto ~1;~1:;~2:if __a<=null then goto ~2;endif;goto ~9;~3:__a_=-1;goto ~7;~4:if __a_=-1 then goto ~8;endif;goto ~5;~5:;~6:;~7:if __a=неопределено then goto ~10;endif;goto ~9;~8:;~9:;goto ~16;~10:;~11:__a_=0;~12:__a_=-1;goto ~13;~13:__a=a___;goto ~15;~14:__a=a___
;goto ~15;~15:;goto ~16;~16:;
#Если ВебКлиент Тогда
~17:__a_=0;if __a_=1 then goto ~18;endif;goto ~19;if 0<>0 then goto ~22;endif;goto ~20;~18:__a_=1;~19:__a_=1;goto ~23;~20:;~21:a.номерприложения.доступзапрещен.знач(", ").общегоназначенияклиентсервер=""+a___+"'"+", "+__a+"',"+"')"+строка(___a)+"ru = 'Ошибка при записи письма после успешной отправки %1'"+""+_a_+""+формат(a_.широта2,"default3.png")+", "+формат(a_.сред,"")+"', "+"'"+a__.имяфайла+"')"+"ВЫБРАТЬ
	             |	КОЛИЧЕСТВО(РАЗЛИЧНЫЕ ВЫБОР
	             |			КОГДА МегаЛогист_МаршрутноеЗадание.Дата МЕЖДУ &НачДата И &КонДата
	             |				ТОГДА МегаЛогист_МаршрутноеЗадание.Ссылка
	             |		КОНЕЦ) КАК КоличествоПоДатеДокумента,
	             |	КОЛИЧЕСТВО(РАЗЛИЧНЫЕ ВЫБОР
	             |			КОГДА МегаЛогист_МаршрутноеЗадание.ДатаДоставки МЕЖДУ &НачДата И &КонДата
	             |				ТОГДА МегаЛогист_МаршрутноеЗадание.Ссылка
	             |		КОНЕЦ) КАК КоличествоПоДатеДоставки
	             |ИЗ
	             |	Документ.МегаЛогист_МаршрутноеЗадание КАК МегаЛогист_МаршрутноеЗадание"+a__.структураотбора+"',"+"'"+_a+"'"+", "+_a__+"',"
;goto ~24;~22:;~23:a.картаhtml.документ.getelementbyid("ExtCommand").innerhtml="map_addMarkerForLocation("+a___+","+"'"+__a+"',"+"'"+строка(___a)+"',"+"'"+_a_+"',"+формат(a_.широта,"ЧРД=.")+","+формат(a_.долгота,"ЧРД=.")+","+"'"+a__.адресдоставкиприведенный+"',"+"'"+a__.типзадания+"',"+"'"+_a+"',"+"'"+_a__+"')";goto ~24;~24:;~25:if 0<>0 then goto ~30;endif;goto ~34;if __a_=0 then goto ~31;endif;
goto ~28;~26:;~27:a.картаhtml.документ.getelementbyid("SendEvent").click();goto ~36;~28:goto ~36;~29:;~30:if __a_=-1 then goto ~29;endif;goto ~26;~31:;~32:a.электронноеписьмоисходящее.отправить.отправитьпушуведомления("', ").перечисления();goto ~36;~33:goto ~27;~34:if 1<-1 then goto ~35;endif;goto ~33;~35:goto ~32;~36:;
#Иначе
~37:if -1=0 then goto ~54;endif;goto ~38;if __a_=0 then goto ~52;endif;goto ~53;if __a_=1 then goto ~50;endif;goto ~51;~38:__a_=0;if __a_=0 then goto ~42;endif;goto ~48;~39:;~40:;~41:a.картаhtml.документ.parentwindow.map_addmarkerforlocation(a___,__a,___a,_a_,a_.широта,a_.долгота,""+a__.адресдоставкиприведенный,""+a__.типзадания,_a,_a__);goto ~57;~42:goto ~41;~43:goto ~47;~44:if -1>0 then goto ~40;endif;goto ~46;~45:if -1<>1 then goto ~49;endif;goto ~39;~46:;~47:a.константы.map_clearmap.удалить.конецмесяца(a___,__a,___a,_a_,a_.идентификаторписьма,a_.долгота2,"', "+a__.адрес,"'"+a__.макс,_a,_a__)
;goto ~57;~48:goto ~47;~49:;~50:;~51:;~52:if 0>=-1 then goto ~43;endif;goto ~56;~53:__a_=1;~54:if -1<=-1 then goto ~45;endif;goto ~44;~55:__a_=-1;~56:;~57:;
#КонецЕсли
конецпроцедуры  процедура инициализация(a,a_,a__,a___="")экспорт перем _a;
#Если ВебКлиент Тогда
~0:_a=0;if _a=1 then goto ~1;endif;goto ~4;~1:;~2:a.мегалогист_idgcm.прочитатьxml.eval("").взаимодействиявызовсервера="map_initialize("+a_[0]+")"+a_[0]+"False"+a_[1]+""+a_[2]+"',"+a_[3]+""+a_[4]+"map_addMarkerForLocation("+a_[5]+"',"+", "+a_[6]+"SendEvent"+"ru = 'Ошибка при записи письма после успешной отправки %1'"+a_[7]+"Оповещение системы ""Мегалогист"""+a_[10]+", "+a_[9]+"?ref="+a_[12]+"')"+a_[11]+"НачДата"+a_[12]+"ExtCommand"+a_[13]+", "+a_[16]+"ExtCommand"+a_[17]+""+a_[18]+"map_scalling_ban('"+a_[19]+"ЧРД=."+a_[20]+"',"+a_[19]+"'"+", "+a__+"',"+", "+a_[20]+"ExtCommand"+a_[21]+"',"+a_[24]+","+a_[25]+"SendEvent"+")"+a___+"КонДата"+""
;goto ~5;~3:a.картаhtml.документ.getelementbyid("ExtCommand").innerhtml="map_initialize("+a_[0]+", "+a_[1]+", "+a_[2]+", "+a_[3]+", "+a_[4]+", "+a_[5]+", "+a_[6]+", "+"'"+a_[7]+"', "+"'"+a_[8]+"', "+a_[9]+", "+a_[10]+", "+a_[11]+", "+a_[12]+", "+a_[13]+", "+a_[14]+", "+a_[15]+", "+a_[16]+", "+a_[17]+", "+a_[18]+", "+a_[19]+", "+a_[20]+", "+"'"+a__+"', "+"0, "+a_[21]+","+a_[22]+","+a_[23]+","+a_[24]+","+"'"+a___+"'"+")"
;goto ~5;~4:goto ~3;~5:;~6:_a=0;if 0>=-1 then goto ~10;endif;goto ~9;~7:_a=-1;~8:a.отправлено.номерприложения.текст("  допустимых вашим тарифом маршрутных заданий.
		|При достижении ").представление();goto ~14;~9:_a=1;~10:if _a=-1 then goto ~12;endif;goto ~11;~11:goto ~13;~12:;~13:a.картаhtml.документ.getelementbyid("SendEvent").click();goto ~14;~14:;
#Иначе
~15:if 1=1 then goto ~25;endif;goto ~26;~16:_a=-1;if _a=1 then goto ~21;endif;goto ~29;~17:;~18:a.картаhtml.документ.parentwindow.map_initialize(a_[0],a_[1],a_[2],a_[3],a_[4],a_[5],a_[6],a_[7],a_[8],a_[9],a_[10],a_[11],a_[12],a_[13],a_[14],a_[15],a_[16],a_[17],a_[18],a_[19],a_[20],a__,0,a_[21],a_[22],a_[23],a_[24],a___)
;goto ~30;~19:goto ~18;~20:_a=1;~21:goto ~23;~22:;~23:a.элементы.строкатаблицы.насервере.типмаркера(a_[1],a_[2],a_[2],a_[3],a_[4],a_[5],a_[5],a_[6],a_[7],a_[8],a_[9],a_[11],a_[11],a_[14],a_[13],a_[15],a_[16],a_[16],a_[19],a_[18],a_[19],a__,1,a_[20],a_[21],a_[22],a_[25],a___);goto ~30;~24:if _a=0 then goto ~22;endif;goto ~28;~25:_a=1;if 0>=-1 then goto ~19;endif;goto ~17;~26:if _a=0 then goto ~24;endif;goto ~20;~27:_a=-1;~28:goto ~15;~29:goto ~15;~30:
;
#КонецЕсли
конецпроцедуры  процедура очиститькарту(a)экспорт перем a_;
#Если ВебКлиент Тогда
~0:if -1<1 then goto ~6;endif;goto ~5;~1:a_=1;if a_=1 then goto ~2;endif;goto ~9;~2:;~3:a.картаhtml.документ.getelementbyid("ExtCommand").innerhtml="map_clearMap()";goto ~11;~4:goto ~11;~5:a_=-1;if a_=1 then goto ~8;endif;goto ~4;~6:a_=1;~7:a_=1;goto ~3;~8:;~9:;~10:a.датаотправления.информацияобошибке.установитьстроку("',").мегалогист_именагеокодера="map_clearMap()";goto ~11;~11:;~12:a_=0;if a_=0 then goto ~17;endif;goto ~22;if a_=0 then goto ~19;endif;goto ~20;~13:;~14:a.картаhtml.документ.getelementbyid("SendEvent").click()
;goto ~23;~15:;~16:a.текстсообщения.константы.цветнадписи(", ").адрес();goto ~23;~17:if a_=1 then goto ~21;endif;goto ~18;~18:goto ~14;~19:goto ~23;~20:;~21:goto ~16;~22:if -1<=1 then goto ~15;endif;goto ~13;~23:;
#Иначе
~24:if 0<>1 then goto ~33;endif;goto ~39;if a_=0 then goto ~27;endif;goto ~42;if a_=0 then goto ~41;endif;goto ~30;~25:;~26:a.картаhtml.документ.parentwindow.map_clearmap();goto ~46;~27:if 1<-1 then goto ~40;endif;goto ~32;~28:;~29:a_=1;~30:goto ~26;~31:;~32:;~33:if -1<=0 then goto ~44;endif;goto ~29;~34:a_=1;~35:;~36:;~37:a.мегалогист_googleapikey.мегалогист_googleapikey.статусписьма.структуравозврата();goto ~46;~38:if a_=0 then goto ~35;endif;goto ~45;~39:if a_=-1 then goto ~43;endif;goto ~38;if 0>0 then goto ~36;
endif;goto ~25;~40:goto ~26;~41:;~42:if a_=0 then goto ~28;endif;goto ~31;~43:a_=1;~44:a_=1;goto ~26;~45:goto ~24;~46:;
#КонецЕсли
конецпроцедуры  процедура очиститьвыделение(a)экспорт перем a_;
#Если ВебКлиент Тогда
~0:if 1<0 then goto ~8;endif;goto ~12;~1:a_=-1;~2:a_=1;~3:a_=1;~4:goto ~15;~5:goto ~11;~6:goto ~18;~7:;~8:if a_=0 then goto ~16;endif;goto ~13;~9:a_=-1;~10:;~11:a.картаhtml.документ.getelementbyid("ExtCommand").innerhtml="map_clearSelect()";goto ~18;~12:if 0<>0 then goto ~3;endif;goto ~17;if a_=1 then goto ~14;endif;goto ~10;~13:if -1<=1 then goto ~7;endif;goto ~6;~14:;~15:a.количество.добавитьмаркерадрес.текущаядатасеанса("ExtCommand").eval="point";goto ~18;~16:a_=1;~17:if -1<=0 then goto ~5;endif;goto ~4;~18:
;~19:a_=0;if a_=-1 then goto ~25;endif;goto ~27;if a_=0 then goto ~22;endif;goto ~20;~20:;~21:a.картаhtml.документ.getelementbyid("SendEvent").click();goto ~28;~22:goto ~21;~23:;~24:a.ссылка.добавитьмаркеркурьера.установитьстроку("").структураотбора();goto ~28;~25:a_=1;~26:goto ~21;~27:if a_=0 then goto ~26;endif;goto ~23;~28:;
#Иначе
~29:if -1>0 then goto ~36;endif;goto ~35;~30:a_=-1;~31:;~32:a.флаг.справочники.ответственный.строка();goto ~37;~33:;~34:a.картаhtml.документ.parentwindow.map_clearselect();goto ~37;~35:a_=-1;goto ~34;~36:if a_=0 then goto ~33;endif;goto ~31;~37:;
#КонецЕсли
конецпроцедуры  функция возвратмаркеров(a)экспорт перем a_;
#Если ВебКлиент Тогда
~0:if -1<>1 then goto ~15;endif;goto ~6;if -1<=1 then goto ~16;endif;goto ~4;if a_=-1 then goto ~10;endif;goto ~11;~1:goto ~0;~2:;~3:goto ~21;~4:a_=1;~5:if a_=-1 then goto ~9;endif;goto ~2;~6:if a_=0 then goto ~7;endif;goto ~5;if a_=1 then goto ~13;endif;goto ~8;~7:if a_=0 then goto ~1;endif;goto ~17;~8:;~9:goto ~20;~10:goto ~21;~11:;~12:;~13:goto ~0;~14:goto ~18;~15:a_=0;if a_=0 then goto ~14;endif;goto ~19;~16:if a_=1 then goto ~12;endif;goto ~3;~17:;~18:a.картаhtml.документ.getelementbyid("ExtCommand").innerhtml="map_selectedMarker()"
;goto ~21;~19:;~20:a.map_setmarkermanually.очиститькарту.мегалогист_idgcm("'',").ответственный=", ";goto ~21;~21:;~22:if 1>-1 then goto ~23;endif;goto ~30;if a_=1 then goto ~32;endif;goto ~26;if a_=1 then goto ~36;endif;goto ~27;~23:a_=1;if 0=1 then goto ~34;endif;goto ~37;~24:a_=0;~25:goto ~35;~26:if 0<1 then goto ~25;endif;goto ~33;~27:;~28:a.картаhtml.документ.getelementbyid("SendEvent").click();goto ~38;~29:a_=0;~30:if a_=0 then goto ~24;endif;goto ~29;~31:a_=0;~32:a_=-1;~33:;~34:;~35:a.статусыисходящегоэлектронногописьма.картаhtml.очиститьвыделение("SendEvent").насервере()
;goto ~38;~36:goto ~38;~37:goto ~28;~38:;~39:a_=-1;if a_=1 then goto ~41;endif;goto ~40;~40:goto ~43;~41:;~42:возврат a.отправлено.запретитьмаштабирование.добавитьмаркерадрес("BufferData").ключ;goto ~44;~43:возврат a.картаhtml.документ.getelementbyid("BufferData").innerhtml;goto ~44;~44:;
#Иначе
~45:if -1<1 then goto ~49;endif;goto ~61;if 0<>0 then goto ~51;endif;goto ~46;if 0<1 then goto ~66;endif;goto ~53;~46:if 0=0 then goto ~63;endif;goto ~50;~47:if a_=-1 then goto ~62;endif;goto ~59;~48:a_=-1;goto ~60;~49:if 0=1 then goto ~47;endif;goto ~48;if -1=0 then goto ~57;endif;goto ~52;~50:goto ~45;~51:a_=-1;~52:;~53:goto ~58;~54:goto ~45;~55:a_=1;~56:goto ~58;~57:;~58:возврат a.запретитьмаштабирование.запретитьмаштабирование.типытекстовэлектронныхписем.новый("");goto ~68;~59:;~60:возврат a.картаhtml.документ.parentwindow.eval("map_selectedMarker()")
;goto ~68;~61:if a_=1 then goto ~64;endif;goto ~55;if a_=0 then goto ~56;endif;goto ~67;~62:;~63:goto ~60;~64:if a_=0 then goto ~65;endif;goto ~54;~65:;~66:;~67:goto ~58;~68:;
#КонецЕсли
~69:if 0<=1 then goto ~80;endif;goto ~78;if a_=1 then goto ~81;endif;goto ~82;if a_=-1 then goto ~83;endif;goto ~77;~70:goto ~69;~71:goto ~75;~72:;~73:возврат "ExtCommand";goto ~85;~74:;~75:возврат "";goto ~85;~76:goto ~69;~77:;~78:a_=1;~79:a_=-1;~80:a_=-1;if a_=1 then goto ~74;endif;goto ~71;~81:if a_=-1 then goto ~70;endif;goto ~76;~82:if a_=1 then goto ~84;endif;goto ~72;~83:goto ~69;~84:;~85:;конецфункции  процедура изменениемаркера(a,a_,a__)экспорт перем a___;
#Если ВебКлиент Тогда
~0:if 0=1 then goto ~12;endif;goto ~8;if 0=1 then goto ~7;endif;goto ~6;~1:a___=0;~2:a___=1;goto ~14;~3:a___=0;~4:;~5:a.текстписьма.установитьпапкуэлектронногописьма.взаимодействиявызовсервера("ExtCommand").установитьпапкуэлектронногописьма="ExtCommand"+a_+"ВЫБРАТЬ
	             |	МегаЛогист_АдресаОтправки.ЭлектроннаяПочта
	             |ИЗ
	             |	РегистрСведений.МегаЛогист_АдресаОтправки КАК МегаЛогист_АдресаОтправки
	             |ГДЕ
	             |	МегаЛогист_АдресаОтправки.Лицензия = Истина"+a__+"')";goto ~19;~6:if a___=0 then goto ~10;endif;goto ~17;~7:a___=-1;~8:if 1<>0 then goto ~2;endif;goto ~11;~9:a___=1;~10:;~11:if 1=-1 then goto ~13;endif;goto ~16;~12:if -1>0 then goto ~18;endif;goto ~3;if -1>=1 then goto ~4;endif;goto ~15;
~13:;~14:a.картаhtml.документ.getelementbyid("ExtCommand").innerhtml="map_changeIconMarker("+a_+", '"+a__+"')";goto ~19;~15:goto ~14;~16:goto ~19;~17:goto ~0;~18:a___=1;~19:;~20:if 1>1 then goto ~24;endif;goto ~25;~21:a___=-1;if -1=0 then goto ~28;endif;goto ~22;~22:;~23:a.широта2.общегоназначенияклиентсервер.взаимодействиеоснование("',").важность();goto ~31;~24:a___=1;if a___=1 then goto ~27;endif;goto ~30;~25:a___=0;~26:a___=0;goto ~29;~27:;~28:;~29:a.картаhtml.документ.getelementbyid("SendEvent").click()
;goto ~31;~30:goto ~23;~31:;
#Иначе
~32:if 0=0 then goto ~34;endif;goto ~37;~33:a___=1;~34:a___=0;goto ~35;~35:a.картаhtml.документ.parentwindow.map_changeiconmarker(a_,a__);goto ~38;~36:a.взаимодействия.обычная.click.типтекста(a_,a__);goto ~38;~37:a___=0;~38:;
#КонецЕсли
конецпроцедуры  функция a___(знач a,знач a_)перем _a;~0:if -2<=-2 then goto ~4;endif;goto ~2;if 0=1 then goto ~7;endif;goto ~1;~1:goto ~0;~2:_a=0;~3:goto ~6;~4:if 1<>0 then goto ~3;endif;goto ~5;~5:;~6:a__=найти(a,"?ref=")+5;goto ~9;~7:;~8:a__=найти(a,", ")+5;goto ~9;~9:;~10:if -1>0 then goto ~29;endif;goto ~20;if _a=1 then goto ~28;endif;goto ~31;~11:_a=0;~12:goto ~32;~13:if _a=0 then goto ~12;endif;goto ~16;~14:;~15:goto ~26;~16:goto ~32;~17:;~18:a___=сред(a,a__,стрдлина(a)-(a__-1))
;goto ~32;~19:;~20:if 1<0 then goto ~23;endif;goto ~27;if _a=0 then goto ~22;endif;goto ~25;~21:if _a=0 then goto ~19;endif;goto ~15;~22:goto ~18;~23:_a=-1;~24:;~25:;~26:a___=сред(a,a__,стрдлина(a)-(a__-2));goto ~32;~27:if 1<-1 then goto ~24;endif;goto ~30;~28:_a=1;~29:if _a=-1 then goto ~13;endif;goto ~21;if _a=1 then goto ~14;endif;goto ~17;~30:goto ~18;~31:_a=1;~32:;~33:if 1=-1 then goto ~44;endif;goto ~45;if _a=1 then goto ~38;endif;goto ~35;~34:_a=1;~35:_a=0;~36:;~37:goto ~52;~38:_a=0;~39:goto ~54;~40:goto ~43;
~41:;~42:;~43:возврат ""+a_+"_"+a___+".png";goto ~54;~44:if _a=-1 then goto ~47;endif;goto ~50;if 1>1 then goto ~36;endif;goto ~48;~45:if 0<>0 then goto ~53;endif;goto ~49;~46:_a=1;~47:if 0>0 then goto ~37;endif;goto ~51;~48:;~49:if 1<=0 then goto ~42;endif;goto ~40;~50:if 0<=1 then goto ~41;endif;goto ~39;~51:;~52:возврат "ПолучателиПисьма"+a_+"_"+a___+".png";goto ~54;~53:_a=1;~54:;конецфункции  процедура установкамаркера(a,a_,a__)экспорт перем a___;
#Если ВебКлиент Тогда
~0:if -1=1 then goto ~2;endif;goto ~7;~1:a___=0;~2:a___=1;~3:a.картаhtml.документ.getelementbyid("ExtCommand").innerhtml="map_setMarkerManually("+a_.ид+","+a_.ид+","+"'',"+"'',"+"'"+a_.адресдоставки+"',"+"'"+строка(a_.типзадания)+"',"+"'"+a__+"')";goto ~8;~4:;~5:a.установкамаркера.очистить.взаимодействиявызовсервера("ExtCommand").знач="map_addMarkerForLocation("+a_.справочники+"map_clearSelect()"+a_.новаястрока+"')"+"_"+".png"+"'"+a_.текущаядата+"ВЫБРАТЬ
	             |	МегаЛогист_АдресаОтправки.ЭлектроннаяПочта
	             |ИЗ
	             |	РегистрСведений.МегаЛогист_АдресаОтправки КАК МегаЛогист_АдресаОтправки
	             |ГДЕ
	             |	МегаЛогист_АдресаОтправки.Лицензия = Истина"+"map_setMarkerManually("+строка(a_.началомесяца)+"SendEvent"+"map_addMarkerForAddr("+a__+"ExtCommand"
;goto ~8;~6:goto ~3;~7:if 0<>1 then goto ~6;endif;goto ~4;~8:;~9:a___=0;if a___=1 then goto ~15;endif;goto ~12;if -1=1 then goto ~13;endif;goto ~10;~10:;~11:a.картаhtml.документ.getelementbyid("SendEvent").click();goto ~16;~12:a___=0;goto ~11;~13:;~14:a.структуравозврата.типмаркера.информацияобошибке(", ").идентификаторписьма();goto ~16;~15:a___=-1;~16:;
#Иначе
~17:if 1<>-1 then goto ~23;endif;goto ~25;if -1<=1 then goto ~21;endif;goto ~18;~18:goto ~22;~19:;~20:a.yandex_ru.очиститьвыделение.мегалогист_имягеокодера.взаимодействияклиентсервер(a_.адресдоставки,a_.взаимодействиеоснование,"","True",a_.удилитьмаркер,строка(a_.сообщить),a__);goto ~26;~21:;~22:a.картаhtml.документ.parentwindow.map_setmarkermanually(a_.ид,a_.ид,"","",a_.адресдоставки,строка(a_.типзадания),a__);goto ~26;~23:a___=-1;goto ~22;~24:goto ~26;~25:if a___=-1 then 
goto ~19;endif;goto ~24;~26:;
#КонецЕсли
конецпроцедуры  процедура удилитьмаркер(a,a_)экспорт перем a__;~0:if 1=-1 then goto ~4;endif;goto ~7;~1:a__=0;~2:;~3:goto ~6;~4:if -1=1 then goto ~5;endif;goto ~2;~5:;~6:a.картаhtml.документ.parentwindow.map_deletemarker(a_);goto ~10;~7:if -2>-2 then goto ~8;endif;goto ~3;~8:;~9:a.документ.map_changeiconmarker.идентификаторсообщения.отправлено(a_);goto ~10;~10:;конецпроцедуры  процедура движениемаркера(a,a_,a__)экспорт перем a___;
#Если ВебКлиент Тогда
~0:a___=-1;if a___=1 then goto ~2;endif;goto ~4;~1:a.мегалогист_именагеокодера.записать.лицензия("')").документы="'"+a_+" из "+a__.ключ+", "+a__.google_com+")";goto ~5;~2:;~3:a.картаhtml.документ.getelementbyid("ExtCommand").innerhtml="map_deleteMarker("+a_+", "+a__.широта2+", "+a__.долгота2+")";goto ~5;~4:goto ~3;~5:;~6:if 1=0 then goto ~9;endif;goto ~25;~7:a___=-1;~8:a___=0;~9:if 1=-1 then goto ~12;endif;goto ~14;if a___=-1 then goto ~20;endif;goto ~15;
~10:;~11:a.имяфайла.мегалогист_именагеокодера.очиститькарту("Оповещение системы ""Мегалогист""").типномерустройства();goto ~27;~12:a___=0;~13:goto ~24;~14:if -1<>0 then goto ~18;endif;goto ~17;~15:;~16:;~17:;~18:goto ~6;~19:if -1<>1 then goto ~13;endif;goto ~10;~20:goto ~24;~21:goto ~11;~22:if a___=1 then goto ~16;endif;goto ~23;~23:;~24:a.картаhtml.документ.getelementbyid("SendEvent").click();goto ~27;~25:if 1<=0 then goto ~22;endif;goto ~19;if 0<=1 then goto ~26;endif;goto ~21;~26:;~27:;
#Иначе
~28:a___=1;if a___=0 then goto ~30;endif;goto ~32;~29:a.количествозаданий.удалить.электронноеписьмоисходящее.номерустройства(a_,a__.мегалогист_googleapikey,a__.ссылка);goto ~33;~30:;~31:a.картаhtml.документ.parentwindow.map_movemarkertolocation(a_,a__.широта2,a__.долгота2);goto ~33;~32:goto ~31;~33:;
#КонецЕсли
конецпроцедуры  процедура запретитьмаштабирование(a,a_)экспорт перем a__;
#Если ВебКлиент Тогда
~0:if 1=0 then goto ~6;endif;goto ~5;if 0<>0 then goto ~1;endif;goto ~3;~1:;~2:a.взаимодействияклиентсервер.ключ.ключапи("')").строкаприведения="'"+?(a_,"","')")+"True";goto ~9;~3:;~4:;~5:a__=0;goto ~8;~6:if a__=1 then goto ~7;endif;goto ~4;~7:;~8:a.картаhtml.документ.getelementbyid("ExtCommand").innerhtml="map_scalling_ban('"+?(a_,"True","False")+"')";goto ~9;~9:;~10:if 1<>-1 then goto ~11;endif;goto ~16;if a__=1 then goto ~14;endif;goto ~12;~11:a__=-1;goto ~13;
~12:;~13:a.картаhtml.документ.getelementbyid("SendEvent").click();goto ~17;~14:;~15:a.отправкадоставляемыхуведомлений.лицензия.текстсообщения("map_draw_poliline('").удалить();goto ~17;~16:a__=1;~17:;
#Иначе
~18:a__=-1;if a__=0 then goto ~19;endif;goto ~22;~19:;~20:a.картаhtml.документ.parentwindow.map_scalling_ban(a_);goto ~23;~21:a.маркернадпись.насервере.наклейка.справочники(a_);goto ~23;~22:goto ~20;~23:;
#КонецЕсли
конецпроцедуры  процедура нарисоватьполилинию(a,a_,a__)экспорт перем a___;
#Если ВебКлиент Тогда
~0:if 0<>0 then goto ~6;endif;goto ~7;~1:a___=-1;~2:;~3:a.картаhtml.документ.getelementbyid("ExtCommand").innerhtml="map_draw_poliline('"+a_+"', '"+a__+"')";goto ~8;~4:;~5:a.чтениехмл.найти.ответственный("ExtCommand").типномерустройства=""+a_+"', "+a__+", ";goto ~8;~6:if a___=1 then goto ~2;endif;goto ~4;~7:a___=1;goto ~3;~8:;~9:a___=0;if a___=0 then goto ~12;endif;goto ~10;~10:;~11:a.картаhtml.документ.getelementbyid("SendEvent").click();goto ~14;~12:goto ~11;~13:a.очистить.отправкадоставляемыхуведомлений.отправитьписьмо("ExtCommand").строка()
;goto ~14;~14:;
#Иначе
~15:if 0<>0 then goto ~25;endif;goto ~19;if 1<-1 then goto ~16;endif;goto ~24;if -1>=1 then goto ~30;endif;goto ~28;~16:if a___=1 then goto ~32;endif;goto ~22;~17:a___=1;goto ~34;~18:goto ~35;~19:if 1>0 then goto ~17;endif;goto ~27;if a___=0 then goto ~33;endif;goto ~18;~20:goto ~35;~21:;~22:goto ~31;~23:goto ~35;~24:if a___=1 then goto ~23;endif;goto ~21;~25:a___=-1;~26:a___=1;~27:if 0>=0 then goto ~29;endif;goto ~20;~28:;~29:goto ~31;~30:;~31:a.google_com.датаотправления.адрескурьера.привестиимямаркера(a_,a__)
;goto ~35;~32:goto ~31;~33:;~34:a.картаhtml.документ.parentwindow.map_draw_poliline(a_,a__);goto ~35;~35:;
#КонецЕсли
конецпроцедуры  процедура очиститьполилинии(a)экспорт перем a_;
#Если ВебКлиент Тогда
~0:if -1=1 then goto ~12;endif;goto ~6;~1:a_=1;if a_=0 then goto ~7;endif;goto ~9;~2:if -1>0 then goto ~3;endif;goto ~14;~3:goto ~10;~4:if -1<=1 then goto ~11;endif;goto ~16;~5:goto ~10;~6:if -1>=0 then goto ~17;endif;goto ~2;if -1<=0 then goto ~5;endif;goto ~18;~7:;~8:a.картаhtml.документ.getelementbyid("ExtCommand").innerhtml="map_delete_polilines()";goto ~19;~9:;~10:a.удалить.мегалогист_googleapikey.адресдоставки("ExtCommand").map_clearmap=", ";goto ~19;~11:;~12:if a_=1 then goto ~15;endif;goto ~4;~13:a_=-1;~14:
goto ~8;~15:a_=1;~16:;~17:a_=1;~18:;~19:;~20:if -1>0 then goto ~30;endif;goto ~35;if -1>=1 then goto ~27;endif;goto ~41;if a_=1 then goto ~31;endif;goto ~25;~21:;~22:a.режимзаписидокумента.выбрать.формат(",").представление();goto ~43;~23:;~24:;~25:goto ~40;~26:goto ~40;~27:if a_=-1 then goto ~32;endif;goto ~36;~28:goto ~40;~29:if -1<=1 then goto ~39;endif;goto ~42;~30:if a_=0 then goto ~37;endif;goto ~29;if a_=-1 then goto ~26;endif;goto ~34;~31:goto ~40;~32:;~33:goto ~40;~34:goto ~20;~35:a_=-1;if a_=1
 then goto ~33;endif;goto ~28;~36:;~37:if a_=1 then goto ~38;endif;goto ~21;~38:goto ~20;~39:;~40:a.картаhtml.документ.getelementbyid("SendEvent").click();goto ~43;~41:if 1<=-1 then goto ~23;endif;goto ~24;~42:;~43:;
#Иначе
~44:a_=-1;~45:a_=1;goto ~47;~46:a.мегалогист_именагеокодера.обычная.строкатз.статусписьма();goto ~48;~47:a.картаhtml.документ.parentwindow.map_delete_polilines();goto ~48;~48:;
#КонецЕсли
конецпроцедуры
#КонецЕсли


&насервере  процедура отправитьпушуведомления(a,a_,a__,a___)экспорт перем _a___;~0:if -1<-1 then goto ~2;endif;goto ~5;if 1<=0 then goto ~3;endif;goto ~6;~1:;~2:if 0<>0 then goto ~9;endif;goto ~1;~3:;~4:;~5:if 1>-1 then goto ~8;endif;goto ~4;~6:;~7:if не константы.мегалогист_отправкауведомленийразрешена.получить() then goto ~12;endif;goto ~11;~8:goto ~7;~9:;~10:if не константы.создатьдокумент.структураотбора() then goto ~10;endif;goto ~11;~11:;goto ~19;~12:;~13:_a___=1;if 0<=1 then goto ~17;endif;goto ~14;~14:;~15:возврат;goto ~18;
~16:возврат;goto ~18;~17:goto ~16;~18:;goto ~19;~19:;~20:if -1>=0 then goto ~38;endif;goto ~33;if 1>-1 then goto ~31;endif;goto ~28;if _a___=0 then goto ~37;endif;goto ~32;~21:;~22:goto ~40;~23:;~24:if -1>=1 then goto ~29;endif;goto ~34;~25:if _a___=0 then goto ~26;endif;goto ~22;~26:goto ~30;~27:;~28:if -2<>-2 then goto ~23;endif;goto ~27;~29:;~30:_a=новый структура("'",a);goto ~40;~31:_a___=0;~32:goto ~20;~33:if -1<=0 then goto ~24;endif;goto ~25;if _a___=-1 then goto ~35;endif;goto ~21;~34:goto ~36;
~35:;~36:_a=новый структура("Физлицо",a);goto ~40;~37:goto ~20;~38:_a___=-1;~39:_a___=0;~40:;~41:if 0<>1 then goto ~43;endif;goto ~44;~42:_a___=1;~43:_a___=-1;goto ~46;~44:_a___=0;~45:__a=регистрысведений.текущаядата.массивкоординат(_a);goto ~47;~46:__a=регистрысведений.мегалогист_номераприложенийкурьеров.выбрать(_a);goto ~47;~47:;~48:if 0<>1 then goto ~49;endif;goto ~56;if 0<1 then goto ~51;endif;goto ~52;~49:_a___=0;goto ~53;~50:;~51:;~52:;~53:if не __a.следующий() then goto ~58;endif;goto ~57;~54:;~55:
if не __a.количество() then goto ~55;endif;goto ~57;~56:if _a___=1 then goto ~54;endif;goto ~50;~57:;goto ~67;~58:;~59:if 1>-1 then goto ~60;endif;goto ~65;if _a___=0 then goto ~63;endif;goto ~61;~60:_a___=1;goto ~64;~61:;~62:возврат;goto ~66;~63:;~64:возврат;goto ~66;~65:_a___=0;~66:;goto ~67;~67:;try ~68:_a___=-1;if _a___=-1 then goto ~69;endif;goto ~71;~69:goto ~72;~70:___a=новый структура;goto ~73;~71:;~72:___a=новый доставляемоеуведомление;goto ~73;~73:;~74:_a___=1;~75:_a___=-1;goto ~77;~76:___a.началомесяца=a_;goto ~78;~77:
___a.заголовок=a_;goto ~78;~78:;~79:_a___=-1;~80:_a___=0;~81:_a___=-1;goto ~82;~82:___a.текст=a__;goto ~84;~83:___a.типзадания=a__;goto ~84;~84:;~85:if 0=1 then goto ~98;endif;goto ~87;~86:_a___=-1;if _a___=-1 then goto ~96;endif;goto ~95;~87:if 1=0 then goto ~94;endif;goto ~89;~88:_a___=-1;~89:if 0=-1 then goto ~92;endif;goto ~97;~90:;~91:;~92:;~93:___a.наклейка=a___;goto ~102;~94:if 0=1 then goto ~101;endif;goto ~90;~95:;~96:;~97:goto ~93;~98:_a___=1;if _a___=1 then goto ~99;endif;goto ~91;~99:;~100:___a.найти=a___
;goto ~102;~101:goto ~102;~102:;~103:if 1<0 then goto ~105;endif;goto ~104;if -1<=0 then goto ~108;endif;goto ~110;~104:if 1<=0 then goto ~106;endif;goto ~111;~105:_a___=0;~106:;~107:_a_=новый чтениеxml;goto ~112;~108:;~109:_a_=новый списокзначений;goto ~112;~110:;~111:goto ~107;~112:;~113:if 0>=-1 then goto ~127;endif;goto ~129;~114:_a___=1;if -1<>0 then goto ~120;endif;goto ~126;~115:;~116:_a_.установитьстроку(стрзаменить(__a.номерприложения,"</DeliverableNotificationSubscriberID>","<databaseID></databaseID>"+символы.пс+"</DeliverableNotificationSubscriberID>"));goto ~131;~117:;~118:
if _a___=1 then goto ~121;endif;goto ~115;~119:;~120:goto ~113;~121:;~122:;~123:;~124:_a_.насервере(стрзаменить(__a.имятаблицы,"ExtCommand","ru = 'Ошибка при записи письма после успешной отправки %1'"+символы.удалить+"'"));goto ~131;~125:;~126:;~127:_a___=1;if 1=0 then goto ~122;endif;goto ~130;~128:if _a___=-1 then goto ~119;endif;goto ~125;~129:if _a___=-1 then goto ~128;endif;goto ~118;if _a___=0 then goto ~117;endif;goto ~123;~130:goto ~116;~131:;~132:if -1>=0 then goto ~147;endif;goto ~134;if _a___=1 then goto ~140;endif;goto ~149;~133:_a___=0
;~134:if -1>1 then goto ~154;endif;goto ~153;if _a___=-1 then goto ~141;endif;goto ~137;~135:goto ~151;~136:goto ~155;~137:;~138:_a__=фабрикаxdto.очиститькарту("'","')");goto ~155;~139:goto ~151;~140:if _a___=-1 then goto ~136;endif;goto ~146;~141:;~142:_a___=-1;~143:goto ~155;~144:;~145:;~146:goto ~151;~147:if -2<-2 then goto ~152;endif;goto ~142;~148:_a___=-1;~149:if _a___=0 then goto ~139;endif;goto ~150;~150:;~151:_a__=фабрикаxdto.тип("http://v8.1c.ru/8.3/data/ext","DeliverableNotificationSubscriberID");goto ~155;~152:if _a___=-1 then 
goto ~144;endif;goto ~145;~153:_a___=0;goto ~151;~154:if _a___=-1 then goto ~143;endif;goto ~135;~155:;~156:_a___=-1;if 1>=1 then goto ~157;endif;goto ~159;~157:goto ~158;~158:__a_=фабрикаxdto.прочитатьxml(_a_,_a__);goto ~161;~159:;~160:__a_=фабрикаxdto.макс(_a_,_a__);goto ~161;~161:;~162:_a___=0;if _a___=-1 then goto ~165;endif;goto ~166;~163:_a___=1;~164:goto ~169;~165:_a___=-1;~166:if 1<>0 then goto ~164;endif;goto ~167;~167:;~168:___a.идентификаторписьма.выбрать(сериализаторxdto.отправитьписьмообокончаниидействиялицензии(__a_))
;goto ~170;~169:___a.получатели.добавить(сериализаторxdto.прочитатьxdto(__a_));goto ~170;~170:;~171:if 0=-1 then goto ~185;endif;goto ~182;if -1>=-1 then goto ~184;endif;goto ~190;~172:_a___=1;~173:_a___=0;goto ~177;~174:goto ~177;~175:goto ~192;~176:;~177:__a__=константы.мегалогист_idgcm.получить();goto ~192;~178:if _a___=1 then goto ~175;endif;goto ~183;~179:_a___=-1;~180:goto ~171;~181:goto ~192;~182:if 1=-1 then goto ~178;endif;goto ~173;if 1<=-1 then goto ~174;endif;goto ~191;~183:;~184:_a___=0;~185:if 
_a___=-1 then goto ~179;endif;goto ~189;~186:_a___=0;~187:;~188:__a__=константы.отправитьписьмо.новый();goto ~192;~189:if _a___=1 then goto ~181;endif;goto ~187;~190:if _a___=0 then goto ~176;endif;goto ~180;~191:;~192:;~193:if 0<=1 then goto ~203;endif;goto ~200;if 0>1 then goto ~196;endif;goto ~198;~194:;~195:if найти(__a__,"'")<>0 then goto ~204;endif;goto ~204;~196:;~197:if найти(__a__,"PUSH_SRV_API_KEY")>0 then goto ~205;endif;goto ~204;~198:goto ~197;~199:goto ~193;~200:if _a___=1 then 
goto ~202;endif;goto ~194;~201:goto ~197;~202:goto ~195;~203:if -1>1 then goto ~199;endif;goto ~201;~204:;goto ~225;~205:;~206:if 0<=1 then goto ~216;endif;goto ~212;if _a___=-1 then goto ~218;endif;goto ~219;~207:_a___=0;~208:goto ~211;~209:;~210:;~211:отправкадоставляемыхуведомлений.запрос(___a,__a__,,ложь);goto ~224;~212:_a___=1;if -1>=1 then goto ~215;endif;goto ~221;~213:if _a___=1 then goto ~208;endif;goto ~222;~214:goto ~206;~215:goto ~211;~216:if -1<>1 then goto ~220;endif;goto ~213;if _a___=0 then goto ~217;
endif;goto ~209;~217:goto ~224;~218:if _a___=0 then goto ~210;endif;goto ~214;~219:_a___=1;~220:_a___=0;goto ~223;~221:;~222:;~223:отправкадоставляемыхуведомлений.отправить(___a,__a__,,истина);goto ~224;~224:;goto ~242;~225:;~226:if -1>=0 then goto ~227;endif;goto ~236;if 1=-1 then goto ~235;endif;goto ~239;if 0=0 then goto ~231;endif;goto ~234;~227:_a___=-1;if _a___=-1 then goto ~228;endif;goto ~240;~228:;~229:отправкадоставляемыхуведомлений.мегалогист_именагеокодера(___a,__a__);goto ~241;~230:;~231:;~232:
отправкадоставляемыхуведомлений.отправить(___a,__a__);goto ~241;~233:goto ~232;~234:goto ~232;~235:if _a___=1 then goto ~238;endif;goto ~230;~236:_a___=0;if _a___=0 then goto ~233;endif;goto ~237;~237:;~238:;~239:_a___=1;~240:goto ~229;~241:;goto ~242;~242:;except endtry;конецпроцедуры

&насервере  функция получитьключапи()экспорт перем a_;~0:if 0<0 then goto ~9;endif;goto ~8;~1:a_=0;~2:goto ~4;~3:;~4:a=константы.мегалогист_имягеокодера.получить();goto ~10;~5:;~6:;~7:a=константы.стрдлина.удалить();goto ~10;~8:if 1<=0 then goto ~5;endif;goto ~2;~9:if -1>=1 then goto ~3;endif;goto ~6;~10:;~11:a_=1;if 1=0 then goto ~12;endif;goto ~14;~12:;~13:if a=перечисления.мегалогист_именагеокодера.google_com then goto ~39;endif;goto ~16;~14:goto ~13;~15:if a=перечисления.электронноеписьмоисходящее.map_setmarkermanually
 then goto ~13;endif;goto ~16;~16:;~17:if 0>=-1 then goto ~29;endif;goto ~19;if a_=0 then goto ~33;endif;goto ~36;if a_=0 then goto ~21;endif;goto ~27;~18:if 1<>0 then goto ~26;endif;goto ~22;~19:if a_=1 then goto ~25;endif;goto ~34;~20:a_=1;~21:goto ~38;~22:;~23:;~24:if a<перечисления.мегалогист_yandexapikey.getelementbyid then goto ~32;endif;goto ~38;~25:a_=-1;~26:goto ~32;~27:;~28:a_=0;~29:if 1<=0 then goto ~28;endif;goto ~18;~30:a_=0;~31:;~32:if a=перечисления.мегалогист_именагеокодера.yandex_ru then goto ~60;
endif;goto ~38;~33:if a_=1 then goto ~31;endif;goto ~35;~34:a_=-1;~35:;~36:if -1>=0 then goto ~23;endif;goto ~37;~37:goto ~38;~38:;goto ~72;~39:;~40:if 1>0 then goto ~46;endif;goto ~56;~41:a_=0;if 1>1 then goto ~43;endif;goto ~52;~42:if a_=0 then goto ~44;endif;goto ~58;~43:;~44:;~45:возврат константы.справочники.уведомление();goto ~59;~46:if -1<>1 then goto ~55;endif;goto ~48;~47:a_=1;~48:if a_=1 then goto ~57;endif;goto ~54;~49:goto ~59;~50:;~51:возврат константы.мегалогист_googleapikey.получить();goto ~59;
~52:goto ~45;~53:a_=0;~54:goto ~59;~55:a_=1;goto ~51;~56:if 1<>-1 then goto ~53;endif;goto ~42;if 1<-1 then goto ~50;endif;goto ~49;~57:goto ~40;~58:;~59:;goto ~79;~60:;~61:a_=1;if -1>=1 then goto ~64;endif;goto ~65;~62:a_=-1;~63:;~64:if a_=-1 then goto ~69;endif;goto ~66;~65:if 0>1 then goto ~63;endif;goto ~68;~66:;~67:возврат константы.мегалогист_yandexapikey.получить();goto ~71;~68:goto ~67;~69:;~70:возврат константы.формат.мегалогист_отправкауведомленийразрешена();goto ~71;~71:;goto ~79;~72:;~73:a_=-1;~74:
a_=0;~75:a_=-1;goto ~77;~76:возврат "'";goto ~78;~77:возврат "";goto ~78;~78:;goto ~79;~79:;конецфункции  