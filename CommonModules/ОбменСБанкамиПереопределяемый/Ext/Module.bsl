////////////////////////////////////////////////////////////////////////////////
// ОбменСБанкамиПереопределяемый: механизм обмена электронными документами с банками.
//
////////////////////////////////////////////////////////////////////////////////

#Область ПрограммныйИнтерфейс

// Заполняет массив актуальными видами электронных документов для прикладного решения.
//
// Параметры:
//  Массив - Массив - виды актуальных ЭД:
//   * Перечисления.ВидыЭДОбменСБанками - вид электронного документа.
//
Процедура ПолучитьАктуальныеВидыЭД(Массив) Экспорт
	
	Массив.Добавить(Перечисления.ВидыЭДОбменСБанками.ЗапросВыписки);
	Массив.Добавить(Перечисления.ВидыЭДОбменСБанками.ВыпискаБанка);
	Массив.Добавить(Перечисления.ВидыЭДОбменСБанками.ПлатежноеПоручение);
	Массив.Добавить(Перечисления.ВидыЭДОбменСБанками.ПлатежноеТребование);
	
КонецПроцедуры

// Используется для получения номеров счетов в виде массив строк
//
// Параметры:
//  Организация - СправочникСсылка.Организации - отбор по организации.
//  Банк - СправочникСсылка.КлассификаторБанков - отбор по банку.
//  МассивНомеровБанковскихСчетов - Массив - Массив возврата, в элементах строки с номерами счетов.
//
Процедура ПолучитьНомераБанковскихСчетов(Организация, Банк, МассивНомеровБанковскихСчетов) Экспорт
	
	Запрос = Новый Запрос("
	|ВЫБРАТЬ РАЗЛИЧНЫЕ
	|	БанковскиеСчетаОрганизаций.НомерСчета КАК НомерСчета
	|
	|ИЗ
	|	Справочник.БанковскиеСчетаОрганизаций КАК БанковскиеСчетаОрганизаций
	|
	|ГДЕ
	|	БанковскиеСчетаОрганизаций.Владелец = &Организация
	|	И БанковскиеСчетаОрганизаций.Банк = &Банк
	|	И НЕ БанковскиеСчетаОрганизаций.ПометкаУдаления");
	Запрос.УстановитьПараметр("Организация", Организация);
	Запрос.УстановитьПараметр("Банк", Банк);
	МассивНомеровБанковскихСчетов = Запрос.Выполнить().Выгрузить().ВыгрузитьКолонку("НомерСчета");
	
КонецПроцедуры

// Определяет параметры электронного документа по типу владельца.
//
// Параметры:
//  Источник - ДокументСсылка, ДокументОбъект - Источник объекта, либо ссылка документа/справочника-источника.
//  ПараметрыЭД - Структура - структура параметров источника, необходимых для определения
//                настроек обмена ЭД. Обязательные параметры: ВидЭД, Банк, Организация.
//
Процедура ЗаполнитьПараметрыЭДПоИсточнику(Источник, ПараметрыЭД) Экспорт
	
	Перем ВидЭД, НаправлениеЭД, Организация, Контрагент;
	
	ТипИсточника = ТипЗнч(Источник);
	ЭтоСсылка = ОбщегоНазначения.ЭтоСсылка(ТипИсточника);
	
	Если (ТипИсточника = Тип("ДокументСсылка.СписаниеБезналичныхДенежныхСредств")
		ИЛИ ТипИсточника = Тип("ДокументОбъект.СписаниеБезналичныхДенежныхСредств"))
		И Источник.ТипПлатежногоДокумента = Перечисления.ТипыПлатежныхДокументов.ПлатежноеПоручение Тогда
		
		Если ЭтоСсылка Тогда
			БанковскийСчет = ОбщегоНазначения.ЗначениеРеквизитаОбъекта(Источник, "БанковскийСчет");
		Иначе
			БанковскийСчет = Источник.БанковскийСчет;
		КонецЕсли;
		Организация = ОбщегоНазначения.ЗначениеРеквизитаОбъекта(БанковскийСчет, "Владелец");
		Банк = ОбщегоНазначения.ЗначениеРеквизитаОбъекта(БанковскийСчет, "Банк");
		ВидЭД = Перечисления.ВидыЭДОбменСБанками.ПлатежноеПоручение;
		
	ИначеЕсли (ТипИсточника = Тип("ДокументСсылка.ПоступлениеБезналичныхДенежныхСредств") 
		ИЛИ ТипИсточника = Тип("ДокументОбъект.ПоступлениеБезналичныхДенежныхСредств")) 
		И Источник.ТипПлатежногоДокумента = Перечисления.ТипыПлатежныхДокументов.ПлатежноеТребование Тогда 
		Если ЭтоСсылка Тогда 
			БанковскийСчет = ОбщегоНазначения.ЗначениеРеквизитаОбъекта(Источник, "БанковскийСчет"); 
		Иначе 
			БанковскийСчет = Источник.БанковскийСчет; 
		КонецЕсли; 
		Организация = ОбщегоНазначения.ЗначениеРеквизитаОбъекта(БанковскийСчет, "Владелец"); 
		Банк = ОбщегоНазначения.ЗначениеРеквизитаОбъекта(БанковскийСчет, "Банк"); 
		ВидЭД = Перечисления.ВидыЭДОбменСБанками.ПлатежноеТребование; 
	КонецЕсли;
	
	ПараметрыЭД.ВидЭД = ВидЭД;
	ПараметрыЭД.Организация = Организация;
	ПараметрыЭД.Банк = Банк;
	
КонецПроцедуры

// Подготавливает данные для электронного документа типа Платежное поручение.
//
// Параметры:
//  СсылкаНаОбъект - ДокументСсылка - ссылка на объект информационной базы,
//                  по которому необходимо создать электронный документ.
//  СтруктураЭД - Структура - структура данных для формирования электронного документа.
//  ДеревоДокумента - ДеревоЗначений - соответствует макету ПлатежноеПоручение обработки ОбменСБанками.
//
Процедура ЗаполнитьДанныеПоПлатежномуПоручению(СсылкаНаОбъект, СтруктураЭД, ДеревоДокумента) Экспорт
	
	Запрос = Новый Запрос;
	Запрос.Текст = "
	|ВЫБРАТЬ РАЗРЕШЕННЫЕ
	|	СписаниеБезналичныхДенежныхСредств.Дата КАК Дата,
	|	СписаниеБезналичныхДенежныхСредств.СуммаДокумента КАК Сумма,
	|	СписаниеБезналичныхДенежныхСредств.ВидПлатежа КАК РеквизитыПлатежа_ВидПлатежа,
	|	ВЫБОР
	|		КОГДА СписаниеБезналичныхДенежныхСредств.ТипПлатежногоДокумента = ЗНАЧЕНИЕ(Перечисление.ТипыПлатежныхДокументов.ПлатежноеПоручение)
	|			ТОГДА ""01""
	|		КОГДА СписаниеБезналичныхДенежныхСредств.ТипПлатежногоДокумента = ЗНАЧЕНИЕ(Перечисление.ТипыПлатежныхДокументов.Аккредитив)
	|			ТОГДА ""08""
	|		КОГДА СписаниеБезналичныхДенежныхСредств.ТипПлатежногоДокумента = ЗНАЧЕНИЕ(Перечисление.ТипыПлатежныхДокументов.ИнкассовоеПоручение)
	|			ТОГДА ""06""
	|		КОГДА СписаниеБезналичныхДенежныхСредств.ТипПлатежногоДокумента = ЗНАЧЕНИЕ(Перечисление.ТипыПлатежныхДокументов.ПлатежноеТребование)
	|			ТОГДА ""02""
	|		ИНАЧЕ ""00""
	|	КОНЕЦ КАК РеквизитыПлатежа_ВидОплаты,
	|	СписаниеБезналичныхДенежныхСредств.ПеречислениеВБюджет КАК ПеречислениеВБюджет,
	|	СписаниеБезналичныхДенежныхСредств.СтатусСоставителя КАК ПлатежиВБюджет_СтатусСоставителя,
	|	ВЫБОР
	|		КОГДА СписаниеБезналичныхДенежныхСредств.КПППлательщика = """" ТОГДА
	|			ВЫБОР
	|				КОГДА СписаниеБезналичныхДенежныхСредств.РегистрацияВНалоговомОргане В (
	|					ЗНАЧЕНИЕ(Справочник.РегистрацииВНалоговомОргане.ПустаяСсылка),
	|					НЕОПРЕДЕЛЕНО)
	|				ТОГДА СписаниеБезналичныхДенежныхСредств.Организация.КПП
	|				ИНАЧЕ СписаниеБезналичныхДенежныхСредств.РегистрацияВНалоговомОргане.КПП
	|			КОНЕЦ
	|	ИНАЧЕ
	|		СписаниеБезналичныхДенежныхСредств.КПППлательщика
	|	КОНЕЦ КАК РеквизитыПлательщика_КПП,
	|	ВЫБОР
	|		КОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчетКонтрагента.КППКорреспондента = """" ТОГДА
	|			СписаниеБезналичныхДенежныхСредств.Контрагент.КПП
	|		ИНАЧЕ
	|			СписаниеБезналичныхДенежныхСредств.БанковскийСчетКонтрагента.КППКорреспондента
	|	КОНЕЦ КАК РеквизитыПолучателя_КПП,
	|	СписаниеБезналичныхДенежныхСредств.КодБК КАК ПлатежиВБюджет_ПоказательКБК,
	|	СписаниеБезналичныхДенежныхСредств.КодОКАТО КАК ПлатежиВБюджет_ОКТМО,
	|	СписаниеБезналичныхДенежныхСредств.ПоказательОснования КАК ПлатежиВБюджет_ПоказательОснования,
	|	ВЫБОР
	|		КОГДА СписаниеБезналичныхДенежныхСредств.ПоказательПериода = """"
	|			ТОГДА ""0""
	|		ИНАЧЕ СписаниеБезналичныхДенежныхСредств.ПоказательПериода
	|	КОНЕЦ КАК ПлатежиВБюджет_ПоказательПериода,
	|	ВЫБОР
	|		КОГДА СписаниеБезналичныхДенежныхСредств.ПоказательНомера = """"
	|			ТОГДА ""0""
	|		ИНАЧЕ СписаниеБезналичныхДенежныхСредств.ПоказательНомера
	|	КОНЕЦ КАК ПлатежиВБюджет_ПоказательНомера,
	|	ВЫБОР
	|		КОГДА СписаниеБезналичныхДенежныхСредств.ПоказательДаты = """"
	|			ТОГДА ""0""
	|		ИНАЧЕ СписаниеБезналичныхДенежныхСредств.ПоказательДаты
	|	КОНЕЦ КАК ПлатежиВБюджет_ПоказательДаты,
	|	СписаниеБезналичныхДенежныхСредств.ОчередностьПлатежа КАК РеквизитыПлатежа_Очередность,
	|	СписаниеБезналичныхДенежныхСредств.БанковскийСчетКонтрагента.НомерСчета КАК РеквизитыПолучателя_РасчСчет,
	|	ВЫБОР
	|		КОГДА (ВЫРАЗИТЬ(СписаниеБезналичныхДенежныхСредств.БанковскийСчетКонтрагента.ТекстКорреспондента КАК СТРОКА(255))) = """"
	|			ТОГДА ВЫБОР
	|					КОГДА СписаниеБезналичныхДенежныхСредств.ХозяйственнаяОперация В (
	|						ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ВыдачаДенежныхСредствПодотчетнику),
	|						ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ВыплатаЗарплатыНаЛицевыеСчета),
	|						ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ВыдачаЗаймаСотруднику))
	|						ТОГДА СписаниеБезналичныхДенежныхСредств.ПодотчетноеЛицо.Наименование
	|					ИНАЧЕ СписаниеБезналичныхДенежныхСредств.Контрагент.НаименованиеПолное
	|				КОНЕЦ
	|		ИНАЧЕ СписаниеБезналичныхДенежныхСредств.БанковскийСчетКонтрагента.ТекстКорреспондента
	|	КОНЕЦ КАК РеквизитыПолучателя_Наименование,
	|	ВЫБОР
	|		КОГДА ЕСТЬNULL(СписаниеБезналичныхДенежныхСредств.БанковскийСчетКонтрагента.ИННКорреспондента, """") = """" ТОГДА
	|			ВЫБОР
	|				КОГДА СписаниеБезналичныхДенежныхСредств.ХозяйственнаяОперация В (
	|					ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ВыдачаДенежныхСредствПодотчетнику),
	|					ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ВыдачаЗаймаСотруднику),
	|					ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ВыплатаЗарплатыНаЛицевыеСчета))
	|				ТОГДА
	|					СписаниеБезналичныхДенежныхСредств.ПодотчетноеЛицо.ИНН
	|				ИНАЧЕ
	|					СписаниеБезналичныхДенежныхСредств.Контрагент.ИНН
	|			КОНЕЦ
	|		ИНАЧЕ
	|			СписаниеБезналичныхДенежныхСредств.БанковскийСчетКонтрагента.ИННКорреспондента
	|	КОНЕЦ КАК РеквизитыПолучателя_ИНН,
	|	ВЫБОР
	|		КОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчетКонтрагента.РучноеИзменениеРеквизитовБанка = ИСТИНА
	|			ТОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчетКонтрагента.НаименованиеБанка
	|		ИНАЧЕ СписаниеБезналичныхДенежныхСредств.БанковскийСчетКонтрагента.Банк.Наименование
	|	КОНЕЦ КАК РеквизитыПолучателя_Банк_Наименование,
	|	ВЫБОР
	|		КОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчетКонтрагента.РучноеИзменениеРеквизитовБанка = ИСТИНА
	|			ТОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчетКонтрагента.ГородБанка
	|		ИНАЧЕ СписаниеБезналичныхДенежныхСредств.БанковскийСчетКонтрагента.Банк.Город
	|	КОНЕЦ КАК РеквизитыПолучателя_Банк_Город,
	|	ВЫБОР
	|		КОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчетКонтрагента.РучноеИзменениеРеквизитовБанка = ИСТИНА
	|			ТОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчетКонтрагента.БИКБанка
	|		ИНАЧЕ СписаниеБезналичныхДенежныхСредств.БанковскийСчетКонтрагента.Банк.Код
	|	КОНЕЦ КАК РеквизитыПолучателя_Банк_БИК,
	|	ВЫБОР
	|		КОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчетКонтрагента.РучноеИзменениеРеквизитовБанка = ИСТИНА
	|			ТОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчетКонтрагента.КоррСчетБанка
	|		ИНАЧЕ СписаниеБезналичныхДенежныхСредств.БанковскийСчетКонтрагента.Банк.КоррСчет
	|	КОНЕЦ КАК РеквизитыПолучателя_Банк_КоррСчет,
	|	ВЫБОР
	|		КОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчетКонтрагента.БанкДляРасчетов = ЗНАЧЕНИЕ(Справочник.КлассификаторБанков.ПустаяСсылка)
	|			ТОГДА ЛОЖЬ
	|		ИНАЧЕ ИСТИНА
	|	КОНЕЦ КАК НепрямыеРасчетыУПолучателя,
	|	ВЫБОР
	|		КОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчетКонтрагента.РучноеИзменениеРеквизитовБанкаДляРасчетов = ИСТИНА
	|			ТОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчетКонтрагента.НаименованиеБанкаДляРасчетов
	|		ИНАЧЕ СписаниеБезналичныхДенежныхСредств.БанковскийСчетКонтрагента.БанкДляРасчетов.Наименование
	|	КОНЕЦ КАК БанкПолучателяДляНепрямыхРасчетов_Наименование,
	|	ВЫБОР
	|		КОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчетКонтрагента.РучноеИзменениеРеквизитовБанкаДляРасчетов = ИСТИНА
	|			ТОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчетКонтрагента.ГородБанкаДляРасчетов
	|		ИНАЧЕ СписаниеБезналичныхДенежныхСредств.БанковскийСчетКонтрагента.БанкДляРасчетов.Город
	|	КОНЕЦ КАК БанкПолучателяДляНепрямыхРасчетов_Город,
	|	ВЫБОР
	|		КОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчетКонтрагента.РучноеИзменениеРеквизитовБанкаДляРасчетов = ИСТИНА
	|			ТОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчетКонтрагента.БИКБанкаДляРасчетов
	|		ИНАЧЕ СписаниеБезналичныхДенежныхСредств.БанковскийСчетКонтрагента.БанкДляРасчетов.Код
	|	КОНЕЦ КАК БанкПолучателяДляНепрямыхРасчетов_БИК,
	|	ВЫБОР
	|		КОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчетКонтрагента.РучноеИзменениеРеквизитовБанкаДляРасчетов = ИСТИНА
	|			ТОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчетКонтрагента.КоррСчетБанкаДляРасчетов
	|		ИНАЧЕ СписаниеБезналичныхДенежныхСредств.БанковскийСчетКонтрагента.БанкДляРасчетов.КоррСчет
	|	КОНЕЦ КАК БанкПолучателяДляНепрямыхРасчетов_КоррСчет,
	|	СписаниеБезналичныхДенежныхСредств.БанковскийСчет.НомерСчета КАК РеквизитыПлательщика_РасчСчет,
	|	ВЫБОР
	|		КОГДА (ВЫРАЗИТЬ(СписаниеБезналичныхДенежныхСредств.БанковскийСчет.ТекстКорреспондента КАК СТРОКА(255))) = """"
	|			ТОГДА СписаниеБезналичныхДенежныхСредств.Организация.НаименованиеСокращенное
	|		ИНАЧЕ СписаниеБезналичныхДенежныхСредств.БанковскийСчет.ТекстКорреспондента
	|	КОНЕЦ КАК РеквизитыПлательщика_Наименование,
	|	ВЫБОР
	|		КОГДА СписаниеБезналичныхДенежныхСредств.ИННПлательщика = """" ТОГДА
	|			СписаниеБезналичныхДенежныхСредств.Организация.ИНН
	|		ИНАЧЕ
	|			СписаниеБезналичныхДенежныхСредств.ИННПлательщика
	|	КОНЕЦ КАК РеквизитыПлательщика_ИНН,
	|	ВЫБОР
	|		КОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчет.РучноеИзменениеРеквизитовБанка = ИСТИНА
	|			ТОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчет.НаименованиеБанка
	|		ИНАЧЕ СписаниеБезналичныхДенежныхСредств.БанковскийСчет.Банк.Наименование
	|	КОНЕЦ КАК РеквизитыПлательщика_Банк_Наименование,
	|	ВЫБОР
	|		КОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчет.РучноеИзменениеРеквизитовБанка = ИСТИНА
	|			ТОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчет.ГородБанка
	|		ИНАЧЕ СписаниеБезналичныхДенежныхСредств.БанковскийСчет.Банк.Город
	|	КОНЕЦ КАК РеквизитыПлательщика_Банк_Город,
	|	ВЫБОР
	|		КОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчет.РучноеИзменениеРеквизитовБанка = ИСТИНА
	|			ТОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчет.БИКБанка
	|		ИНАЧЕ СписаниеБезналичныхДенежныхСредств.БанковскийСчет.Банк.Код
	|	КОНЕЦ КАК РеквизитыПлательщика_Банк_БИК,
	|	ВЫБОР
	|		КОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчет.РучноеИзменениеРеквизитовБанка = ИСТИНА
	|			ТОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчет.КоррСчетБанка
	|		ИНАЧЕ СписаниеБезналичныхДенежныхСредств.БанковскийСчет.Банк.КоррСчет
	|	КОНЕЦ КАК РеквизитыПлательщика_Банк_КоррСчет,
	|	ВЫБОР
	|		КОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчет.БанкДляРасчетов = ЗНАЧЕНИЕ(Справочник.КлассификаторБанков.ПустаяСсылка)
	|			ТОГДА ЛОЖЬ
	|		ИНАЧЕ ИСТИНА
	|	КОНЕЦ КАК НепрямыеРасчетыУПлательщика,
	|	ВЫБОР
	|		КОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчет.РучноеИзменениеРеквизитовБанка = ИСТИНА
	|			ТОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчет.НаименованиеБанкаДляРасчетов
	|		ИНАЧЕ СписаниеБезналичныхДенежныхСредств.БанковскийСчет.БанкДляРасчетов.Наименование
	|	КОНЕЦ КАК БанкПлательщикаДляНепрямыхРасчетов_Наименование,
	|	ВЫБОР
	|		КОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчет.РучноеИзменениеРеквизитовБанка = ИСТИНА
	|			ТОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчет.ГородБанкаДляРасчетов
	|		ИНАЧЕ СписаниеБезналичныхДенежныхСредств.БанковскийСчет.БанкДляРасчетов.Город
	|	КОНЕЦ КАК БанкПлательщикаДляНепрямыхРасчетов_Город,
	|	ВЫБОР
	|		КОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчет.РучноеИзменениеРеквизитовБанка = ИСТИНА
	|			ТОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчет.БИКБанкаДляРасчетов
	|		ИНАЧЕ СписаниеБезналичныхДенежныхСредств.БанковскийСчет.БанкДляРасчетов.Код
	|	КОНЕЦ КАК БанкПлательщикаДляНепрямыхРасчетов_БИК,
	|	ВЫБОР
	|		КОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчет.РучноеИзменениеРеквизитовБанка = ИСТИНА
	|			ТОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчет.КоррСчетБанкаДляРасчетов
	|		ИНАЧЕ СписаниеБезналичныхДенежныхСредств.БанковскийСчет.БанкДляРасчетов.КоррСчет
	|	КОНЕЦ КАК БанкПлательщикаДляНепрямыхРасчетов_КоррСчет,
	|	СписаниеБезналичныхДенежныхСредств.НазначениеПлатежа КАК РеквизитыПлатежа_НазначениеПлатежа,
	|	СписаниеБезналичныхДенежныхСредств.БанковскийСчет.Владелец КАК Организация,
	|	СписаниеБезналичныхДенежныхСредств.ИдентификаторПлатежа КАК РеквизитыПлатежа_Код,
	|	ВЫБОР
	|		КОГДА СписаниеБезналичныхДенежныхСредств.ХозяйственнаяОперация В (
	|				ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ВыдачаДенежныхСредствПодотчетнику),
	|				ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ВыдачаЗаймаСотруднику),
	|				ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ВыплатаЗарплатыНаЛицевыеСчета))
	|			ТОГДА СписаниеБезналичныхДенежныхСредств.ПодотчетноеЛицо
	|		ИНАЧЕ СписаниеБезналичныхДенежныхСредств.Контрагент
	|	КОНЕЦ КАК Получатель
	|ИЗ
	|	Документ.СписаниеБезналичныхДенежныхСредств КАК СписаниеБезналичныхДенежныхСредств
	|ГДЕ
	|	(НЕ СписаниеБезналичныхДенежныхСредств.ХозяйственнаяОперация В (
	|		ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ПеречислениеДенежныхСредствНаДругойСчет),
	|		ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ОплатаДенежныхСредствВДругуюОрганизацию),
	|		ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ВозвратДенежныхСредствВДругуюОрганизацию),
	|		ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ВнутренняяПередачаДенежныхСредств)))
	|	И СписаниеБезналичныхДенежныхСредств.Ссылка = &Ссылка
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	|ВЫБРАТЬ
	|	СписаниеБезналичныхДенежныхСредств.Дата,
	|	СписаниеБезналичныхДенежныхСредств.СуммаДокумента,
	|	СписаниеБезналичныхДенежныхСредств.ВидПлатежа,
	|	ВЫБОР
	|		КОГДА СписаниеБезналичныхДенежныхСредств.ТипПлатежногоДокумента = ЗНАЧЕНИЕ(Перечисление.ТипыПлатежныхДокументов.ПлатежноеПоручение)
	|			ТОГДА ""01""
	|		КОГДА СписаниеБезналичныхДенежныхСредств.ТипПлатежногоДокумента = ЗНАЧЕНИЕ(Перечисление.ТипыПлатежныхДокументов.Аккредитив)
	|			ТОГДА ""08""
	|		КОГДА СписаниеБезналичныхДенежныхСредств.ТипПлатежногоДокумента = ЗНАЧЕНИЕ(Перечисление.ТипыПлатежныхДокументов.ИнкассовоеПоручение)
	|			ТОГДА ""06""
	|		КОГДА СписаниеБезналичныхДенежныхСредств.ТипПлатежногоДокумента = ЗНАЧЕНИЕ(Перечисление.ТипыПлатежныхДокументов.ПлатежноеТребование)
	|			ТОГДА ""02""
	|		ИНАЧЕ ""00""
	|	КОНЕЦ,
	|	СписаниеБезналичныхДенежныхСредств.ПеречислениеВБюджет,
	|	СписаниеБезналичныхДенежныхСредств.СтатусСоставителя,
	|	СписаниеБезналичныхДенежныхСредств.Организация.КПП,
	|	СписаниеБезналичныхДенежныхСредств.Организация.КПП,
	|	СписаниеБезналичныхДенежныхСредств.КодБК,
	|	СписаниеБезналичныхДенежныхСредств.КодОКАТО,
	|	СписаниеБезналичныхДенежныхСредств.ПоказательОснования,
	|	ВЫБОР
	|		КОГДА СписаниеБезналичныхДенежныхСредств.ПоказательПериода = """"
	|			ТОГДА ""0""
	|		ИНАЧЕ СписаниеБезналичныхДенежныхСредств.ПоказательПериода
	|	КОНЕЦ,
	|	ВЫБОР
	|		КОГДА СписаниеБезналичныхДенежныхСредств.ПоказательНомера = """"
	|			ТОГДА ""0""
	|		ИНАЧЕ СписаниеБезналичныхДенежныхСредств.ПоказательНомера
	|	КОНЕЦ,
	|	ВЫБОР
	|		КОГДА СписаниеБезналичныхДенежныхСредств.ПоказательДаты = """"
	|			ТОГДА ""0""
	|		ИНАЧЕ СписаниеБезналичныхДенежныхСредств.ПоказательДаты
	|	КОНЕЦ,
	|	СписаниеБезналичныхДенежныхСредств.ОчередностьПлатежа,
	|	СписаниеБезналичныхДенежныхСредств.БанковскийСчетПолучатель.НомерСчета,
	|	ВЫБОР
	|		КОГДА (ВЫРАЗИТЬ(СписаниеБезналичныхДенежныхСредств.БанковскийСчетПолучатель.ТекстКорреспондента КАК СТРОКА(255))) = """"
	|			ТОГДА СписаниеБезналичныхДенежныхСредств.Организация.НаименованиеСокращенное
	|		ИНАЧЕ СписаниеБезналичныхДенежныхСредств.БанковскийСчетПолучатель.ТекстКорреспондента
	|	КОНЕЦ,
	|	СписаниеБезналичныхДенежныхСредств.Организация.ИНН,
	|	ВЫБОР
	|		КОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчетПолучатель.РучноеИзменениеРеквизитовБанка = ИСТИНА
	|			ТОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчетПолучатель.НаименованиеБанка
	|		ИНАЧЕ СписаниеБезналичныхДенежныхСредств.БанковскийСчетПолучатель.Банк.Наименование
	|	КОНЕЦ,
	|	ВЫБОР
	|		КОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчетПолучатель.РучноеИзменениеРеквизитовБанка = ИСТИНА
	|			ТОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчетПолучатель.ГородБанка
	|		ИНАЧЕ СписаниеБезналичныхДенежныхСредств.БанковскийСчетПолучатель.Банк.Город
	|	КОНЕЦ,
	|	ВЫБОР
	|		КОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчетПолучатель.РучноеИзменениеРеквизитовБанка = ИСТИНА
	|			ТОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчетПолучатель.БИКБанка
	|		ИНАЧЕ СписаниеБезналичныхДенежныхСредств.БанковскийСчетПолучатель.Банк.Код
	|	КОНЕЦ,
	|	СписаниеБезналичныхДенежныхСредств.БанковскийСчетПолучатель.Банк.КоррСчет,
	|	ВЫБОР
	|		КОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчетПолучатель.БанкДляРасчетов = ЗНАЧЕНИЕ(Справочник.КлассификаторБанков.ПустаяСсылка)
	|			ТОГДА ЛОЖЬ
	|		ИНАЧЕ ИСТИНА
	|	КОНЕЦ,	
	|	ВЫБОР
	|		КОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчетПолучатель.РучноеИзменениеРеквизитовБанкаДляРасчетов = ИСТИНА
	|			ТОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчетПолучатель.НаименованиеБанкаДляРасчетов
	|		ИНАЧЕ СписаниеБезналичныхДенежныхСредств.БанковскийСчетПолучатель.БанкДляРасчетов.Наименование
	|	КОНЕЦ,
	|	ВЫБОР
	|		КОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчетПолучатель.РучноеИзменениеРеквизитовБанкаДляРасчетов = ИСТИНА
	|			ТОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчетПолучатель.ГородБанкаДляРасчетов
	|		ИНАЧЕ СписаниеБезналичныхДенежныхСредств.БанковскийСчетПолучатель.БанкДляРасчетов.Город
	|	КОНЕЦ,
	|	ВЫБОР
	|		КОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчетПолучатель.РучноеИзменениеРеквизитовБанкаДляРасчетов = ИСТИНА
	|			ТОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчетПолучатель.БИКБанкаДляРасчетов
	|		ИНАЧЕ СписаниеБезналичныхДенежныхСредств.БанковскийСчетПолучатель.БанкДляРасчетов.Код
	|	КОНЕЦ,
	|	ВЫБОР
	|		КОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчетПолучатель.РучноеИзменениеРеквизитовБанкаДляРасчетов = ИСТИНА
	|			ТОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчетПолучатель.КоррСчетБанкаДляРасчетов
	|		ИНАЧЕ СписаниеБезналичныхДенежныхСредств.БанковскийСчетПолучатель.БанкДляРасчетов.КоррСчет
	|	КОНЕЦ,
	|	СписаниеБезналичныхДенежныхСредств.БанковскийСчет.НомерСчета,
	|	ВЫБОР
	|		КОГДА (ВЫРАЗИТЬ(СписаниеБезналичныхДенежныхСредств.БанковскийСчет.ТекстКорреспондента КАК СТРОКА(255))) = """"
	|			ТОГДА СписаниеБезналичныхДенежныхСредств.Организация.НаименованиеСокращенное
	|		ИНАЧЕ СписаниеБезналичныхДенежныхСредств.БанковскийСчет.ТекстКорреспондента
	|	КОНЕЦ,
	|	СписаниеБезналичныхДенежныхСредств.Организация.ИНН,
	|	ВЫБОР
	|		КОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчет.РучноеИзменениеРеквизитовБанка = ИСТИНА
	|			ТОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчет.НаименованиеБанка
	|		ИНАЧЕ СписаниеБезналичныхДенежныхСредств.БанковскийСчет.Банк.Наименование
	|	КОНЕЦ,
	|	ВЫБОР
	|		КОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчет.РучноеИзменениеРеквизитовБанка = ИСТИНА
	|			ТОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчет.ГородБанка
	|		ИНАЧЕ СписаниеБезналичныхДенежныхСредств.БанковскийСчет.Банк.Город
	|	КОНЕЦ,
	|	ВЫБОР
	|		КОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчет.РучноеИзменениеРеквизитовБанка = ИСТИНА
	|			ТОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчет.БИКБанка
	|		ИНАЧЕ СписаниеБезналичныхДенежныхСредств.БанковскийСчет.Банк.Код
	|	КОНЕЦ,
	|	ВЫБОР
	|		КОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчет.РучноеИзменениеРеквизитовБанка = ИСТИНА
	|			ТОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчет.КоррСчетБанка
	|		ИНАЧЕ СписаниеБезналичныхДенежныхСредств.БанковскийСчет.Банк.КоррСчет
	|	КОНЕЦ,
	|	ВЫБОР
	|		КОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчет.БанкДляРасчетов = ЗНАЧЕНИЕ(Справочник.КлассификаторБанков.ПустаяСсылка)
	|			ТОГДА ЛОЖЬ
	|		ИНАЧЕ ИСТИНА
	|	КОНЕЦ,
	|	ВЫБОР
	|		КОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчет.РучноеИзменениеРеквизитовБанкаДляРасчетов = ИСТИНА
	|			ТОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчет.НаименованиеБанкаДляРасчетов
	|		ИНАЧЕ СписаниеБезналичныхДенежныхСредств.БанковскийСчет.БанкДляРасчетов.Наименование
	|	КОНЕЦ,
	|	ВЫБОР
	|		КОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчет.РучноеИзменениеРеквизитовБанкаДляРасчетов = ИСТИНА
	|			ТОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчет.ГородБанкаДляРасчетов
	|		ИНАЧЕ СписаниеБезналичныхДенежныхСредств.БанковскийСчет.БанкДляРасчетов.Город
	|	КОНЕЦ,
	|	ВЫБОР
	|		КОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчет.РучноеИзменениеРеквизитовБанкаДляРасчетов = ИСТИНА
	|			ТОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчет.БИКБанкаДляРасчетов
	|		ИНАЧЕ СписаниеБезналичныхДенежныхСредств.БанковскийСчет.БанкДляРасчетов.Код
	|	КОНЕЦ,
	|	ВЫБОР
	|		КОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчет.РучноеИзменениеРеквизитовБанкаДляРасчетов = ИСТИНА
	|			ТОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчет.КоррСчетБанкаДляРасчетов
	|		ИНАЧЕ СписаниеБезналичныхДенежныхСредств.БанковскийСчет.БанкДляРасчетов.КоррСчет
	|	КОНЕЦ,
	|	СписаниеБезналичныхДенежныхСредств.НазначениеПлатежа,
	|	СписаниеБезналичныхДенежныхСредств.БанковскийСчет.Владелец,
	|	СписаниеБезналичныхДенежныхСредств.ИдентификаторПлатежа,
	|	СписаниеБезналичныхДенежныхСредств.Организация
	|ИЗ
	|	Документ.СписаниеБезналичныхДенежныхСредств КАК СписаниеБезналичныхДенежныхСредств
	|ГДЕ
	|	СписаниеБезналичныхДенежныхСредств.ХозяйственнаяОперация В (ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ПеречислениеДенежныхСредствНаДругойСчет))
	|	И СписаниеБезналичныхДенежныхСредств.Ссылка = &Ссылка
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	|ВЫБРАТЬ
	|	СписаниеБезналичныхДенежныхСредств.Дата,
	|	СписаниеБезналичныхДенежныхСредств.СуммаДокумента,
	|	СписаниеБезналичныхДенежныхСредств.ВидПлатежа,
	|	ВЫБОР
	|		КОГДА СписаниеБезналичныхДенежныхСредств.ТипПлатежногоДокумента = ЗНАЧЕНИЕ(Перечисление.ТипыПлатежныхДокументов.ПлатежноеПоручение)
	|			ТОГДА ""01""
	|		КОГДА СписаниеБезналичныхДенежныхСредств.ТипПлатежногоДокумента = ЗНАЧЕНИЕ(Перечисление.ТипыПлатежныхДокументов.Аккредитив)
	|			ТОГДА ""08""
	|		КОГДА СписаниеБезналичныхДенежныхСредств.ТипПлатежногоДокумента = ЗНАЧЕНИЕ(Перечисление.ТипыПлатежныхДокументов.ИнкассовоеПоручение)
	|			ТОГДА ""06""
	|		КОГДА СписаниеБезналичныхДенежныхСредств.ТипПлатежногоДокумента = ЗНАЧЕНИЕ(Перечисление.ТипыПлатежныхДокументов.ПлатежноеТребование)
	|			ТОГДА ""02""
	|		ИНАЧЕ ""00""
	|	КОНЕЦ,
	|	СписаниеБезналичныхДенежныхСредств.ПеречислениеВБюджет,
	|	СписаниеБезналичныхДенежныхСредств.СтатусСоставителя,
	|	СписаниеБезналичныхДенежныхСредств.Организация.КПП,
	|	СписаниеБезналичныхДенежныхСредств.БанковскийСчетПолучатель.Владелец.КПП,
	|	СписаниеБезналичныхДенежныхСредств.КодБК,
	|	СписаниеБезналичныхДенежныхСредств.КодОКАТО,
	|	СписаниеБезналичныхДенежныхСредств.ПоказательОснования,
	|	ВЫБОР
	|		КОГДА СписаниеБезналичныхДенежныхСредств.ПоказательПериода = """"
	|			ТОГДА ""0""
	|		ИНАЧЕ СписаниеБезналичныхДенежныхСредств.ПоказательПериода
	|	КОНЕЦ,
	|	ВЫБОР
	|		КОГДА СписаниеБезналичныхДенежныхСредств.ПоказательНомера = """"
	|			ТОГДА ""0""
	|		ИНАЧЕ СписаниеБезналичныхДенежныхСредств.ПоказательНомера
	|	КОНЕЦ,
	|	ВЫБОР
	|		КОГДА СписаниеБезналичныхДенежныхСредств.ПоказательДаты = """"
	|			ТОГДА ""0""
	|		ИНАЧЕ СписаниеБезналичныхДенежныхСредств.ПоказательДаты
	|	КОНЕЦ,
	|	СписаниеБезналичныхДенежныхСредств.ОчередностьПлатежа,
	|	СписаниеБезналичныхДенежныхСредств.БанковскийСчетПолучатель.НомерСчета,
	|	ВЫБОР
	|		КОГДА (ВЫРАЗИТЬ(СписаниеБезналичныхДенежныхСредств.БанковскийСчетПолучатель.ТекстКорреспондента КАК СТРОКА(255))) = """"
	|			ТОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчетПолучатель.Владелец.НаименованиеСокращенное
	|		ИНАЧЕ СписаниеБезналичныхДенежныхСредств.БанковскийСчетПолучатель.ТекстКорреспондента
	|	КОНЕЦ,
	|	СписаниеБезналичныхДенежныхСредств.БанковскийСчетПолучатель.Владелец.ИНН,
	|	ВЫБОР
	|		КОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчетПолучатель.РучноеИзменениеРеквизитовБанка = ИСТИНА
	|			ТОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчетПолучатель.НаименованиеБанка
	|		ИНАЧЕ СписаниеБезналичныхДенежныхСредств.БанковскийСчетПолучатель.Банк.Наименование
	|	КОНЕЦ,
	|	ВЫБОР
	|		КОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчетПолучатель.РучноеИзменениеРеквизитовБанка = ИСТИНА
	|			ТОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчетПолучатель.ГородБанка
	|		ИНАЧЕ СписаниеБезналичныхДенежныхСредств.БанковскийСчетПолучатель.Банк.Город
	|	КОНЕЦ,
	|	ВЫБОР
	|		КОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчетПолучатель.РучноеИзменениеРеквизитовБанка = ИСТИНА
	|			ТОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчетПолучатель.БИКБанка
	|		ИНАЧЕ СписаниеБезналичныхДенежныхСредств.БанковскийСчетПолучатель.Банк.Код
	|	КОНЕЦ,
	|	ВЫБОР
	|		КОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчетПолучатель.РучноеИзменениеРеквизитовБанка = ИСТИНА
	|			ТОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчетПолучатель.КоррСчетБанка
	|		ИНАЧЕ СписаниеБезналичныхДенежныхСредств.БанковскийСчетПолучатель.Банк.КоррСчет
	|	КОНЕЦ,
	|	ВЫБОР
	|		КОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчетПолучатель.БанкДляРасчетов = ЗНАЧЕНИЕ(Справочник.КлассификаторБанков.ПустаяСсылка)
	|			ТОГДА ЛОЖЬ
	|		ИНАЧЕ ИСТИНА
	|	КОНЕЦ,	
	|	ВЫБОР
	|		КОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчетПолучатель.РучноеИзменениеРеквизитовБанка = ИСТИНА
	|			ТОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчетПолучатель.НаименованиеБанкаДляРасчетов
	|		ИНАЧЕ СписаниеБезналичныхДенежныхСредств.БанковскийСчетПолучатель.БанкДляРасчетов.Наименование
	|	КОНЕЦ,
	|	ВЫБОР
	|		КОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчетПолучатель.РучноеИзменениеРеквизитовБанка = ИСТИНА
	|			ТОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчетПолучатель.ГородБанкаДляРасчетов
	|		ИНАЧЕ СписаниеБезналичныхДенежныхСредств.БанковскийСчетПолучатель.БанкДляРасчетов.Город
	|	КОНЕЦ,
	|	ВЫБОР
	|		КОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчетПолучатель.РучноеИзменениеРеквизитовБанка = ИСТИНА
	|			ТОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчетПолучатель.БИКБанкаДляРасчетов
	|		ИНАЧЕ СписаниеБезналичныхДенежныхСредств.БанковскийСчетПолучатель.БанкДляРасчетов.Код
	|	КОНЕЦ,
	|	ВЫБОР
	|		КОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчетПолучатель.РучноеИзменениеРеквизитовБанка = ИСТИНА
	|			ТОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчетПолучатель.КоррСчетБанкаДляРасчетов
	|		ИНАЧЕ СписаниеБезналичныхДенежныхСредств.БанковскийСчетПолучатель.БанкДляРасчетов.КоррСчет
	|	КОНЕЦ,
	|	СписаниеБезналичныхДенежныхСредств.БанковскийСчет.НомерСчета,
	|	ВЫБОР
	|		КОГДА (ВЫРАЗИТЬ(СписаниеБезналичныхДенежныхСредств.БанковскийСчет.ТекстКорреспондента КАК СТРОКА(255))) = """"
	|			ТОГДА СписаниеБезналичныхДенежныхСредств.Организация.НаименованиеСокращенное
	|		ИНАЧЕ СписаниеБезналичныхДенежныхСредств.БанковскийСчет.ТекстКорреспондента
	|	КОНЕЦ,
	|	СписаниеБезналичныхДенежныхСредств.Организация.ИНН,
	|	ВЫБОР
	|		КОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчет.РучноеИзменениеРеквизитовБанка = ИСТИНА
	|			ТОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчет.НаименованиеБанка
	|		ИНАЧЕ СписаниеБезналичныхДенежныхСредств.БанковскийСчет.Банк.Наименование
	|	КОНЕЦ,
	|	ВЫБОР
	|		КОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчет.РучноеИзменениеРеквизитовБанка = ИСТИНА
	|			ТОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчет.ГородБанка
	|		ИНАЧЕ СписаниеБезналичныхДенежныхСредств.БанковскийСчет.Банк.Город
	|	КОНЕЦ,
	|	ВЫБОР
	|		КОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчет.РучноеИзменениеРеквизитовБанка = ИСТИНА
	|			ТОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчет.БИКБанка
	|		ИНАЧЕ СписаниеБезналичныхДенежныхСредств.БанковскийСчет.Банк.Код
	|	КОНЕЦ,
	|	СписаниеБезналичныхДенежныхСредств.БанковскийСчет.Банк.КоррСчет,
	|	ВЫБОР
	|		КОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчет.БанкДляРасчетов = ЗНАЧЕНИЕ(Справочник.КлассификаторБанков.ПустаяСсылка)
	|			ТОГДА ЛОЖЬ
	|		ИНАЧЕ ИСТИНА
	|	КОНЕЦ,
	|	ВЫБОР
	|		КОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчет.РучноеИзменениеРеквизитовБанка = ИСТИНА
	|			ТОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчет.НаименованиеБанкаДляРасчетов
	|		ИНАЧЕ СписаниеБезналичныхДенежныхСредств.БанковскийСчет.БанкДляРасчетов.Наименование
	|	КОНЕЦ,
	|	ВЫБОР
	|		КОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчет.РучноеИзменениеРеквизитовБанка = ИСТИНА
	|			ТОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчет.ГородБанкаДляРасчетов
	|		ИНАЧЕ СписаниеБезналичныхДенежныхСредств.БанковскийСчет.БанкДляРасчетов.Город
	|	КОНЕЦ,
	|	ВЫБОР
	|		КОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчет.РучноеИзменениеРеквизитовБанка = ИСТИНА
	|			ТОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчет.БИКБанкаДляРасчетов
	|		ИНАЧЕ СписаниеБезналичныхДенежныхСредств.БанковскийСчет.БанкДляРасчетов.Код
	|	КОНЕЦ,
	|	ВЫБОР
	|		КОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчет.РучноеИзменениеРеквизитовБанка = ИСТИНА
	|			ТОГДА СписаниеБезналичныхДенежныхСредств.БанковскийСчет.КоррСчетБанкаДляРасчетов
	|		ИНАЧЕ СписаниеБезналичныхДенежныхСредств.БанковскийСчет.БанкДляРасчетов.КоррСчет
	|	КОНЕЦ,
	|	СписаниеБезналичныхДенежныхСредств.НазначениеПлатежа,
	|	СписаниеБезналичныхДенежныхСредств.БанковскийСчет.Владелец,
	|	СписаниеБезналичныхДенежныхСредств.ИдентификаторПлатежа,
	|	СписаниеБезналичныхДенежныхСредств.БанковскийСчетПолучатель.Владелец
	|ИЗ
	|	Документ.СписаниеБезналичныхДенежныхСредств КАК СписаниеБезналичныхДенежныхСредств
	|ГДЕ
	|	СписаниеБезналичныхДенежныхСредств.ХозяйственнаяОперация В (
	|		ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ОплатаДенежныхСредствВДругуюОрганизацию),
	|		ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ВозвратДенежныхСредствВДругуюОрганизацию),
	|		ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ВнутренняяПередачаДенежныхСредств))
	|	И СписаниеБезналичныхДенежныхСредств.Ссылка = &Ссылка
	|";
	
	Запрос.УстановитьПараметр("Ссылка", СсылкаНаОбъект);
	РезультатЗапроса = Запрос.Выполнить();
	
	СтрокаДанных = РезультатЗапроса.Выбрать();
	СтрокаДанных.Следующий();
	
	ЭлектронноеВзаимодействие.ЗаполнитьЗначениеРеквизитаВДереве(ДеревоДокумента, "Дата", СтрокаДанных.Дата);
	ЭлектронноеВзаимодействие.ЗаполнитьЗначениеРеквизитаВДереве(ДеревоДокумента, "Сумма", СтрокаДанных.Сумма);
	
	ЭлектронноеВзаимодействие.ЗаполнитьЗначениеРеквизитаВДереве(ДеревоДокумента, "РеквизитыПолучателя.Наименование", 		СтрокаДанных.РеквизитыПолучателя_Наименование);
	ЭлектронноеВзаимодействие.ЗаполнитьЗначениеРеквизитаВДереве(ДеревоДокумента, "РеквизитыПолучателя.ИНН", 				СтрокаДанных.РеквизитыПолучателя_ИНН);
	ЭлектронноеВзаимодействие.ЗаполнитьЗначениеРеквизитаВДереве(ДеревоДокумента, "РеквизитыПолучателя.КПП", 				СтрокаДанных.РеквизитыПолучателя_КПП);
	ЭлектронноеВзаимодействие.ЗаполнитьЗначениеРеквизитаВДереве(ДеревоДокумента, "РеквизитыПолучателя.РасчСчет", 			СтрокаДанных.РеквизитыПолучателя_РасчСчет);
	ЭлектронноеВзаимодействие.ЗаполнитьЗначениеРеквизитаВДереве(ДеревоДокумента, "РеквизитыПолучателя.Банк.БИК", 			СтрокаДанных.РеквизитыПолучателя_Банк_БИК);
	ЭлектронноеВзаимодействие.ЗаполнитьЗначениеРеквизитаВДереве(ДеревоДокумента, "РеквизитыПолучателя.Банк.Наименование", 	СтрокаДанных.РеквизитыПолучателя_Банк_Наименование);
	ЭлектронноеВзаимодействие.ЗаполнитьЗначениеРеквизитаВДереве(ДеревоДокумента, "РеквизитыПолучателя.Банк.Город", 		СтрокаДанных.РеквизитыПолучателя_Банк_Город);
	ЭлектронноеВзаимодействие.ЗаполнитьЗначениеРеквизитаВДереве(ДеревоДокумента, "РеквизитыПолучателя.Банк.КоррСчет", 		СтрокаДанных.РеквизитыПолучателя_Банк_КоррСчет);
	
	ЭлектронноеВзаимодействие.ЗаполнитьЗначениеРеквизитаВДереве(ДеревоДокумента, "РеквизитыПлательщика.Наименование", 		СтрокаДанных.РеквизитыПлательщика_Наименование);
	ЭлектронноеВзаимодействие.ЗаполнитьЗначениеРеквизитаВДереве(ДеревоДокумента, "РеквизитыПлательщика.ИНН", 				СтрокаДанных.РеквизитыПлательщика_ИНН);
	ЭлектронноеВзаимодействие.ЗаполнитьЗначениеРеквизитаВДереве(ДеревоДокумента, "РеквизитыПлательщика.КПП", 				СтрокаДанных.РеквизитыПлательщика_КПП);
	ЭлектронноеВзаимодействие.ЗаполнитьЗначениеРеквизитаВДереве(ДеревоДокумента, "РеквизитыПлательщика.РасчСчет", 			СтрокаДанных.РеквизитыПлательщика_РасчСчет);
	ЭлектронноеВзаимодействие.ЗаполнитьЗначениеРеквизитаВДереве(ДеревоДокумента, "РеквизитыПлательщика.Банк.БИК", 			СтрокаДанных.РеквизитыПлательщика_Банк_БИК);
	ЭлектронноеВзаимодействие.ЗаполнитьЗначениеРеквизитаВДереве(ДеревоДокумента, "РеквизитыПлательщика.Банк.Наименование", СтрокаДанных.РеквизитыПлательщика_Банк_Наименование);
	ЭлектронноеВзаимодействие.ЗаполнитьЗначениеРеквизитаВДереве(ДеревоДокумента, "РеквизитыПлательщика.Банк.Город", 		СтрокаДанных.РеквизитыПлательщика_Банк_Город);
	ЭлектронноеВзаимодействие.ЗаполнитьЗначениеРеквизитаВДереве(ДеревоДокумента, "РеквизитыПлательщика.Банк.КоррСчет", 	СтрокаДанных.РеквизитыПлательщика_Банк_КоррСчет);
	
	ЭлектронноеВзаимодействие.ЗаполнитьЗначениеРеквизитаВДереве(ДеревоДокумента, "РеквизитыПлатежа.ВидПлатежа", 			СтрокаДанных.РеквизитыПлатежа_ВидПлатежа);
	ЭлектронноеВзаимодействие.ЗаполнитьЗначениеРеквизитаВДереве(ДеревоДокумента, "РеквизитыПлатежа.ВидОплаты", 			СтрокаДанных.РеквизитыПлатежа_ВидОплаты);
	ЭлектронноеВзаимодействие.ЗаполнитьЗначениеРеквизитаВДереве(ДеревоДокумента, "РеквизитыПлатежа.Очередность", 			СтрокаДанных.РеквизитыПлатежа_Очередность);
	ЭлектронноеВзаимодействие.ЗаполнитьЗначениеРеквизитаВДереве(ДеревоДокумента, "РеквизитыПлатежа.Код", 					СтрокаДанных.РеквизитыПлатежа_Код);
	ЭлектронноеВзаимодействие.ЗаполнитьЗначениеРеквизитаВДереве(ДеревоДокумента, "РеквизитыПлатежа.НазначениеПлатежа", 	СтрокаДанных.РеквизитыПлатежа_НазначениеПлатежа);
	
	Если СтрокаДанных.ПеречислениеВБюджет Тогда
		ЭлектронноеВзаимодействие.ЗаполнитьЗначениеРеквизитаВДереве(ДеревоДокумента, "ПлатежиВБюджет.СтатусСоставителя", 	СтрокаДанных.ПлатежиВБюджет_СтатусСоставителя);
		ЭлектронноеВзаимодействие.ЗаполнитьЗначениеРеквизитаВДереве(ДеревоДокумента, "ПлатежиВБюджет.ПоказательКБК", 		СтрокаДанных.ПлатежиВБюджет_ПоказательКБК);
		ЭлектронноеВзаимодействие.ЗаполнитьЗначениеРеквизитаВДереве(ДеревоДокумента, "ПлатежиВБюджет.ОКТМО", 				СокрЛП(СтрокаДанных.ПлатежиВБюджет_ОКТМО));
		ЭлектронноеВзаимодействие.ЗаполнитьЗначениеРеквизитаВДереве(ДеревоДокумента, "ПлатежиВБюджет.ПоказательОснования", СтрокаДанных.ПлатежиВБюджет_ПоказательОснования);
		ЭлектронноеВзаимодействие.ЗаполнитьЗначениеРеквизитаВДереве(ДеревоДокумента, "ПлатежиВБюджет.ПоказательПериода", 	СтрокаДанных.ПлатежиВБюджет_ПоказательПериода);
		ЭлектронноеВзаимодействие.ЗаполнитьЗначениеРеквизитаВДереве(ДеревоДокумента, "ПлатежиВБюджет.ПоказательНомера", 	СтрокаДанных.ПлатежиВБюджет_ПоказательНомера);
		ЭлектронноеВзаимодействие.ЗаполнитьЗначениеРеквизитаВДереве(ДеревоДокумента, "ПлатежиВБюджет.ПоказательДаты", 		СтрокаДанных.ПлатежиВБюджет_ПоказательДаты);
	КонецЕсли;
	
	ЭлектронноеВзаимодействие.ЗаполнитьЗначениеРеквизитаВДереве(ДеревоДокумента, "Получатель", СтрокаДанных.Получатель);
	
КонецПроцедуры

// Подготавливает данные для электронного документа типа Платежное требование.
//
// Параметры:
//  СсылкаНаОбъект - ДокументСсылка - ссылка на объект информационной базы,
//                  по которому необходимо создать электронный документ.
//  СтруктураЭД - Структура - структура данных для формирования электронного документа.
//  ДеревоДокумента - ДеревоЗначений - соответствует макету ПлатежноеТребование обработки ОбменСБанками.
//
Процедура ЗаполнитьДанныеПоПлатежномуТребованию(СсылкаНаОбъект, СтруктураЭД, ДеревоДокумента) Экспорт
	
	Запрос = Новый Запрос;
	Запрос.Текст = "
	|ВЫБРАТЬ РАЗРЕШЕННЫЕ
	|	ПоступлениеБезналичныхДенежныхСредств.Дата КАК Дата,
	|	ПоступлениеБезналичныхДенежныхСредств.СуммаДокумента КАК Сумма,
	|	ВЫБОР
	|		КОГДА ПоступлениеБезналичныхДенежныхСредств.ТипПлатежногоДокумента = ЗНАЧЕНИЕ(Перечисление.ТипыПлатежныхДокументов.ПлатежноеПоручение)
	|			ТОГДА ""01""
	|		КОГДА ПоступлениеБезналичныхДенежныхСредств.ТипПлатежногоДокумента = ЗНАЧЕНИЕ(Перечисление.ТипыПлатежныхДокументов.Аккредитив)
	|			ТОГДА ""08""
	|		КОГДА ПоступлениеБезналичныхДенежныхСредств.ТипПлатежногоДокумента = ЗНАЧЕНИЕ(Перечисление.ТипыПлатежныхДокументов.ИнкассовоеПоручение)
	|			ТОГДА ""06""
	|		КОГДА ПоступлениеБезналичныхДенежныхСредств.ТипПлатежногоДокумента = ЗНАЧЕНИЕ(Перечисление.ТипыПлатежныхДокументов.ПлатежноеТребование)
	|			ТОГДА ""02""
	|		ИНАЧЕ ""00""
	|	КОНЕЦ КАК РеквизитыПлатежа_ВидОплаты,
	|	ПоступлениеБезналичныхДенежныхСредств.Организация.КПП КАК РеквизитыПлательщика_КПП,
	|	ПоступлениеБезналичныхДенежныхСредств.Контрагент.КПП КАК РеквизитыПолучателя_КПП,
	|	ПоступлениеБезналичныхДенежныхСредств.БанковскийСчетКонтрагента.НомерСчета КАК РеквизитыПолучателя_РасчСчет,
	|	ВЫБОР
	|		КОГДА (ВЫРАЗИТЬ(ПоступлениеБезналичныхДенежныхСредств.БанковскийСчетКонтрагента.ТекстКорреспондента КАК СТРОКА(255))) = """"
	|			ТОГДА ВЫБОР
	|					КОГДА ПоступлениеБезналичныхДенежныхСредств.ХозяйственнаяОперация В (ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ВыдачаДенежныхСредствПодотчетнику))
	|							ИЛИ ПоступлениеБезналичныхДенежныхСредств.ХозяйственнаяОперация В (ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ВыплатаЗарплатыНаЛицевыеСчета))
	|						ТОГДА ПоступлениеБезналичныхДенежныхСредств.ПодотчетноеЛицо.Наименование
	|					ИНАЧЕ ПоступлениеБезналичныхДенежныхСредств.Контрагент.НаименованиеПолное
	|				КОНЕЦ
	|		ИНАЧЕ ПоступлениеБезналичныхДенежныхСредств.БанковскийСчетКонтрагента.ТекстКорреспондента
	|	КОНЕЦ КАК РеквизитыПолучателя_Наименование,
	|	ВЫБОР
	|		КОГДА ПоступлениеБезналичныхДенежныхСредств.ХозяйственнаяОперация В (ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ВыдачаДенежныхСредствПодотчетнику))
	|				ИЛИ ПоступлениеБезналичныхДенежныхСредств.ХозяйственнаяОперация В (ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ВыплатаЗарплатыНаЛицевыеСчета))
	|			ТОГДА ПоступлениеБезналичныхДенежныхСредств.ПодотчетноеЛицо.ИНН
	|		ИНАЧЕ ПоступлениеБезналичныхДенежныхСредств.Контрагент.ИНН
	|	КОНЕЦ КАК РеквизитыПолучателя_ИНН,
	|	ВЫБОР
	|		КОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчетКонтрагента.РучноеИзменениеРеквизитовБанка = ИСТИНА
	|			ТОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчетКонтрагента.НаименованиеБанка
	|		ИНАЧЕ ПоступлениеБезналичныхДенежныхСредств.БанковскийСчетКонтрагента.Банк.Наименование
	|	КОНЕЦ КАК РеквизитыПолучателя_Банк_Наименование,
	|	ВЫБОР
	|		КОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчетКонтрагента.РучноеИзменениеРеквизитовБанка = ИСТИНА
	|			ТОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчетКонтрагента.ГородБанка
	|		ИНАЧЕ ПоступлениеБезналичныхДенежныхСредств.БанковскийСчетКонтрагента.Банк.Город
	|	КОНЕЦ КАК РеквизитыПолучателя_Банк_Город,
	|	ВЫБОР
	|		КОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчетКонтрагента.РучноеИзменениеРеквизитовБанка = ИСТИНА
	|			ТОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчетКонтрагента.БИКБанка
	|		ИНАЧЕ ПоступлениеБезналичныхДенежныхСредств.БанковскийСчетКонтрагента.Банк.Код
	|	КОНЕЦ КАК РеквизитыПолучателя_Банк_БИК,
	|	ВЫБОР
	|		КОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчетКонтрагента.РучноеИзменениеРеквизитовБанка = ИСТИНА
	|			ТОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчетКонтрагента.КоррСчетБанка
	|		ИНАЧЕ ПоступлениеБезналичныхДенежныхСредств.БанковскийСчетКонтрагента.Банк.КоррСчет
	|	КОНЕЦ КАК РеквизитыПолучателя_Банк_КоррСчет,
	|	ВЫБОР
	|		КОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчетКонтрагента.РучноеИзменениеРеквизитовБанкаДляРасчетов = ИСТИНА
	|			ТОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчетКонтрагента.НаименованиеБанкаДляРасчетов
	|		ИНАЧЕ ПоступлениеБезналичныхДенежныхСредств.БанковскийСчетКонтрагента.БанкДляРасчетов.Наименование
	|	КОНЕЦ КАК БанкПолучателяДляНепрямыхРасчетов_Наименование,
	|	ВЫБОР
	|		КОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчетКонтрагента.РучноеИзменениеРеквизитовБанкаДляРасчетов = ИСТИНА
	|			ТОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчетКонтрагента.ГородБанкаДляРасчетов
	|		ИНАЧЕ ПоступлениеБезналичныхДенежныхСредств.БанковскийСчетКонтрагента.БанкДляРасчетов.Город
	|	КОНЕЦ КАК БанкПолучателяДляНепрямыхРасчетов_Город,
	|	ВЫБОР
	|		КОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчетКонтрагента.РучноеИзменениеРеквизитовБанкаДляРасчетов = ИСТИНА
	|			ТОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчетКонтрагента.БИКБанкаДляРасчетов
	|		ИНАЧЕ ПоступлениеБезналичныхДенежныхСредств.БанковскийСчетКонтрагента.БанкДляРасчетов.Код
	|	КОНЕЦ КАК БанкПолучателяДляНепрямыхРасчетов_БИК,
	|	ВЫБОР
	|		КОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчетКонтрагента.РучноеИзменениеРеквизитовБанкаДляРасчетов = ИСТИНА
	|			ТОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчетКонтрагента.КоррСчетБанкаДляРасчетов
	|		ИНАЧЕ ПоступлениеБезналичныхДенежныхСредств.БанковскийСчетКонтрагента.БанкДляРасчетов.КоррСчет
	|	КОНЕЦ КАК БанкПолучателяДляНепрямыхРасчетов_КоррСчет,
	|	ПоступлениеБезналичныхДенежныхСредств.БанковскийСчет.НомерСчета КАК РеквизитыПлательщика_РасчСчет,
	|	ВЫБОР
	|		КОГДА (ВЫРАЗИТЬ(ПоступлениеБезналичныхДенежныхСредств.БанковскийСчет.ТекстКорреспондента КАК СТРОКА(255))) = """"
	|			ТОГДА ПоступлениеБезналичныхДенежныхСредств.Организация.НаименованиеСокращенное
	|		ИНАЧЕ ПоступлениеБезналичныхДенежныхСредств.БанковскийСчет.ТекстКорреспондента
	|	КОНЕЦ КАК РеквизитыПлательщика_Наименование,
	|	ПоступлениеБезналичныхДенежныхСредств.Организация.ИНН КАК РеквизитыПлательщика_ИНН,
	|	ВЫБОР
	|		КОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчет.РучноеИзменениеРеквизитовБанка = ИСТИНА
	|			ТОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчет.НаименованиеБанка
	|		ИНАЧЕ ПоступлениеБезналичныхДенежныхСредств.БанковскийСчет.Банк.Наименование
	|	КОНЕЦ КАК РеквизитыПлательщика_Банк_Наименование,
	|	ВЫБОР
	|		КОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчет.РучноеИзменениеРеквизитовБанка = ИСТИНА
	|			ТОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчет.ГородБанка
	|		ИНАЧЕ ПоступлениеБезналичныхДенежныхСредств.БанковскийСчет.Банк.Город
	|	КОНЕЦ КАК РеквизитыПлательщика_Банк_Город,
	|	ВЫБОР
	|		КОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчет.РучноеИзменениеРеквизитовБанка = ИСТИНА
	|			ТОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчет.БИКБанка
	|		ИНАЧЕ ПоступлениеБезналичныхДенежныхСредств.БанковскийСчет.Банк.Код
	|	КОНЕЦ КАК РеквизитыПлательщика_Банк_БИК,
	|	ВЫБОР
	|		КОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчет.РучноеИзменениеРеквизитовБанка = ИСТИНА
	|			ТОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчет.КоррСчетБанка
	|		ИНАЧЕ ПоступлениеБезналичныхДенежныхСредств.БанковскийСчет.Банк.КоррСчет
	|	КОНЕЦ КАК РеквизитыПлательщика_Банк_КоррСчет,
	|	ВЫБОР
	|		КОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчет.РучноеИзменениеРеквизитовБанка = ИСТИНА
	|			ТОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчет.НаименованиеБанкаДляРасчетов
	|		ИНАЧЕ ПоступлениеБезналичныхДенежныхСредств.БанковскийСчет.БанкДляРасчетов.Наименование
	|	КОНЕЦ КАК БанкПлательщикаДляНепрямыхРасчетов_Наименование,
	|	ВЫБОР
	|		КОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчет.РучноеИзменениеРеквизитовБанка = ИСТИНА
	|			ТОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчет.ГородБанкаДляРасчетов
	|		ИНАЧЕ ПоступлениеБезналичныхДенежныхСредств.БанковскийСчет.БанкДляРасчетов.Город
	|	КОНЕЦ КАК БанкПлательщикаДляНепрямыхРасчетов_Город,
	|	ВЫБОР
	|		КОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчет.РучноеИзменениеРеквизитовБанка = ИСТИНА
	|			ТОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчет.БИКБанкаДляРасчетов
	|		ИНАЧЕ ПоступлениеБезналичныхДенежныхСредств.БанковскийСчет.БанкДляРасчетов.Код
	|	КОНЕЦ КАК БанкПлательщикаДляНепрямыхРасчетов_БИК,
	|	ВЫБОР
	|		КОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчет.РучноеИзменениеРеквизитовБанка = ИСТИНА
	|			ТОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчет.КоррСчетБанкаДляРасчетов
	|		ИНАЧЕ ПоступлениеБезналичныхДенежныхСредств.БанковскийСчет.БанкДляРасчетов.КоррСчет
	|	КОНЕЦ КАК БанкПлательщикаДляНепрямыхРасчетов_КоррСчет,
	|	ПоступлениеБезналичныхДенежныхСредств.НазначениеПлатежа КАК РеквизитыПлатежа_НазначениеПлатежа,
	|	ПоступлениеБезналичныхДенежныхСредств.БанковскийСчет.Владелец КАК Организация,
	|	ПоступлениеБезналичныхДенежныхСредств.ИдентификаторПлатежа КАК РеквизитыПлатежа_Код,
	|	ВЫБОР
	|		КОГДА ПоступлениеБезналичныхДенежныхСредств.ХозяйственнаяОперация В (ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ВыдачаДенежныхСредствПодотчетнику))
	|				ИЛИ ПоступлениеБезналичныхДенежныхСредств.ХозяйственнаяОперация В (ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ВыплатаЗарплатыНаЛицевыеСчета))
	|			ТОГДА ПоступлениеБезналичныхДенежныхСредств.ПодотчетноеЛицо
	|		ИНАЧЕ ПоступлениеБезналичныхДенежныхСредств.Контрагент
	|	КОНЕЦ КАК Плательщик
	|ИЗ
	|	Документ.ПоступлениеБезналичныхДенежныхСредств КАК ПоступлениеБезналичныхДенежныхСредств
	|ГДЕ
	|	(НЕ ПоступлениеБезналичныхДенежныхСредств.ХозяйственнаяОперация В (
	|		ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ПоступлениеДенежныхСредствСДругогоСчета),
	|		ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ПоступлениеДенежныхСредствИзДругойОрганизации),
	|		ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ВозвратДенежныхСредствОтДругойОрганизации),
	|		ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ВнутренняяПередачаДенежныхСредств)))
	|	И ПоступлениеБезналичныхДенежныхСредств.Ссылка = &Ссылка
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	|ВЫБРАТЬ
	|	ПоступлениеБезналичныхДенежныхСредств.Дата,
	|	ПоступлениеБезналичныхДенежныхСредств.СуммаДокумента,
	|	ВЫБОР
	|		КОГДА ПоступлениеБезналичныхДенежныхСредств.ТипПлатежногоДокумента = ЗНАЧЕНИЕ(Перечисление.ТипыПлатежныхДокументов.ПлатежноеПоручение)
	|			ТОГДА ""01""
	|		КОГДА ПоступлениеБезналичныхДенежныхСредств.ТипПлатежногоДокумента = ЗНАЧЕНИЕ(Перечисление.ТипыПлатежныхДокументов.Аккредитив)
	|			ТОГДА ""08""
	|		КОГДА ПоступлениеБезналичныхДенежныхСредств.ТипПлатежногоДокумента = ЗНАЧЕНИЕ(Перечисление.ТипыПлатежныхДокументов.ИнкассовоеПоручение)
	|			ТОГДА ""06""
	|		КОГДА ПоступлениеБезналичныхДенежныхСредств.ТипПлатежногоДокумента = ЗНАЧЕНИЕ(Перечисление.ТипыПлатежныхДокументов.ПлатежноеТребование)
	|			ТОГДА ""02""
	|		ИНАЧЕ ""00""
	|	КОНЕЦ,
	|	ПоступлениеБезналичныхДенежныхСредств.Организация.КПП,
	|	ПоступлениеБезналичныхДенежныхСредств.Организация.КПП,
	|	ПоступлениеБезналичныхДенежныхСредств.БанковскийСчетОтправитель.НомерСчета,
	|	ВЫБОР
	|		КОГДА (ВЫРАЗИТЬ(ПоступлениеБезналичныхДенежныхСредств.БанковскийСчетОтправитель.ТекстКорреспондента КАК СТРОКА(255))) = """"
	|			ТОГДА ПоступлениеБезналичныхДенежныхСредств.Организация.НаименованиеСокращенное
	|		ИНАЧЕ ПоступлениеБезналичныхДенежныхСредств.БанковскийСчетОтправитель.ТекстКорреспондента
	|	КОНЕЦ,
	|	ПоступлениеБезналичныхДенежныхСредств.Организация.ИНН,
	|	ВЫБОР
	|		КОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчетОтправитель.РучноеИзменениеРеквизитовБанка = ИСТИНА
	|			ТОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчетОтправитель.НаименованиеБанка
	|		ИНАЧЕ ПоступлениеБезналичныхДенежныхСредств.БанковскийСчетОтправитель.Банк.Наименование
	|	КОНЕЦ,
	|	ВЫБОР
	|		КОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчетОтправитель.РучноеИзменениеРеквизитовБанка = ИСТИНА
	|			ТОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчетОтправитель.ГородБанка
	|		ИНАЧЕ ПоступлениеБезналичныхДенежныхСредств.БанковскийСчетОтправитель.Банк.Город
	|	КОНЕЦ,
	|	ВЫБОР
	|		КОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчетОтправитель.РучноеИзменениеРеквизитовБанка = ИСТИНА
	|			ТОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчетОтправитель.БИКБанка
	|		ИНАЧЕ ПоступлениеБезналичныхДенежныхСредств.БанковскийСчетОтправитель.Банк.Код
	|	КОНЕЦ,
	|	ПоступлениеБезналичныхДенежныхСредств.БанковскийСчетОтправитель.Банк.КоррСчет,
	|	ВЫБОР
	|		КОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчетОтправитель.РучноеИзменениеРеквизитовБанкаДляРасчетов = ИСТИНА
	|			ТОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчетОтправитель.НаименованиеБанкаДляРасчетов
	|		ИНАЧЕ ПоступлениеБезналичныхДенежныхСредств.БанковскийСчетОтправитель.БанкДляРасчетов.Наименование
	|	КОНЕЦ,
	|	ВЫБОР
	|		КОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчетОтправитель.РучноеИзменениеРеквизитовБанкаДляРасчетов = ИСТИНА
	|			ТОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчетОтправитель.ГородБанкаДляРасчетов
	|		ИНАЧЕ ПоступлениеБезналичныхДенежныхСредств.БанковскийСчетОтправитель.БанкДляРасчетов.Город
	|	КОНЕЦ,
	|	ВЫБОР
	|		КОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчетОтправитель.РучноеИзменениеРеквизитовБанкаДляРасчетов = ИСТИНА
	|			ТОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчетОтправитель.БИКБанкаДляРасчетов
	|		ИНАЧЕ ПоступлениеБезналичныхДенежныхСредств.БанковскийСчетОтправитель.БанкДляРасчетов.Код
	|	КОНЕЦ,
	|	ВЫБОР
	|		КОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчетОтправитель.РучноеИзменениеРеквизитовБанкаДляРасчетов = ИСТИНА
	|			ТОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчетОтправитель.КоррСчетБанкаДляРасчетов
	|		ИНАЧЕ ПоступлениеБезналичныхДенежныхСредств.БанковскийСчетОтправитель.БанкДляРасчетов.КоррСчет
	|	КОНЕЦ,
	|	ПоступлениеБезналичныхДенежныхСредств.БанковскийСчет.НомерСчета,
	|	ВЫБОР
	|		КОГДА (ВЫРАЗИТЬ(ПоступлениеБезналичныхДенежныхСредств.БанковскийСчет.ТекстКорреспондента КАК СТРОКА(255))) = """"
	|			ТОГДА ПоступлениеБезналичныхДенежныхСредств.Организация.НаименованиеСокращенное
	|		ИНАЧЕ ПоступлениеБезналичныхДенежныхСредств.БанковскийСчет.ТекстКорреспондента
	|	КОНЕЦ,
	|	ПоступлениеБезналичныхДенежныхСредств.Организация.ИНН,
	|	ВЫБОР
	|		КОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчет.РучноеИзменениеРеквизитовБанка = ИСТИНА
	|			ТОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчет.НаименованиеБанка
	|		ИНАЧЕ ПоступлениеБезналичныхДенежныхСредств.БанковскийСчет.Банк.Наименование
	|	КОНЕЦ,
	|	ВЫБОР
	|		КОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчет.РучноеИзменениеРеквизитовБанка = ИСТИНА
	|			ТОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчет.ГородБанка
	|		ИНАЧЕ ПоступлениеБезналичныхДенежныхСредств.БанковскийСчет.Банк.Город
	|	КОНЕЦ,
	|	ВЫБОР
	|		КОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчет.РучноеИзменениеРеквизитовБанка = ИСТИНА
	|			ТОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчет.БИКБанка
	|		ИНАЧЕ ПоступлениеБезналичныхДенежныхСредств.БанковскийСчет.Банк.Код
	|	КОНЕЦ,
	|	ВЫБОР
	|		КОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчет.РучноеИзменениеРеквизитовБанка = ИСТИНА
	|			ТОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчет.КоррСчетБанка
	|		ИНАЧЕ ПоступлениеБезналичныхДенежныхСредств.БанковскийСчет.Банк.КоррСчет
	|	КОНЕЦ,
	|	ВЫБОР
	|		КОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчет.РучноеИзменениеРеквизитовБанкаДляРасчетов = ИСТИНА
	|			ТОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчет.НаименованиеБанкаДляРасчетов
	|		ИНАЧЕ ПоступлениеБезналичныхДенежныхСредств.БанковскийСчет.БанкДляРасчетов.Наименование
	|	КОНЕЦ,
	|	ВЫБОР
	|		КОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчет.РучноеИзменениеРеквизитовБанкаДляРасчетов = ИСТИНА
	|			ТОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчет.ГородБанкаДляРасчетов
	|		ИНАЧЕ ПоступлениеБезналичныхДенежныхСредств.БанковскийСчет.БанкДляРасчетов.Город
	|	КОНЕЦ,
	|	ВЫБОР
	|		КОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчет.РучноеИзменениеРеквизитовБанкаДляРасчетов = ИСТИНА
	|			ТОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчет.БИКБанкаДляРасчетов
	|		ИНАЧЕ ПоступлениеБезналичныхДенежныхСредств.БанковскийСчет.БанкДляРасчетов.Код
	|	КОНЕЦ,
	|	ВЫБОР
	|		КОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчет.РучноеИзменениеРеквизитовБанкаДляРасчетов = ИСТИНА
	|			ТОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчет.КоррСчетБанкаДляРасчетов
	|		ИНАЧЕ ПоступлениеБезналичныхДенежныхСредств.БанковскийСчет.БанкДляРасчетов.КоррСчет
	|	КОНЕЦ,
	|	ПоступлениеБезналичныхДенежныхСредств.НазначениеПлатежа,
	|	ПоступлениеБезналичныхДенежныхСредств.БанковскийСчет.Владелец,
	|	ПоступлениеБезналичныхДенежныхСредств.ИдентификаторПлатежа,
	|	ПоступлениеБезналичныхДенежныхСредств.Организация
	|ИЗ
	|	Документ.ПоступлениеБезналичныхДенежныхСредств КАК ПоступлениеБезналичныхДенежныхСредств
	|ГДЕ
	|	ПоступлениеБезналичныхДенежныхСредств.ХозяйственнаяОперация В (ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ПоступлениеДенежныхСредствСДругогоСчета))
	|	И ПоступлениеБезналичныхДенежныхСредств.Ссылка = &Ссылка
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	|ВЫБРАТЬ
	|	ПоступлениеБезналичныхДенежныхСредств.Дата,
	|	ПоступлениеБезналичныхДенежныхСредств.СуммаДокумента,
	|	ВЫБОР
	|		КОГДА ПоступлениеБезналичныхДенежныхСредств.ТипПлатежногоДокумента = ЗНАЧЕНИЕ(Перечисление.ТипыПлатежныхДокументов.ПлатежноеПоручение)
	|			ТОГДА ""01""
	|		КОГДА ПоступлениеБезналичныхДенежныхСредств.ТипПлатежногоДокумента = ЗНАЧЕНИЕ(Перечисление.ТипыПлатежныхДокументов.Аккредитив)
	|			ТОГДА ""08""
	|		КОГДА ПоступлениеБезналичныхДенежныхСредств.ТипПлатежногоДокумента = ЗНАЧЕНИЕ(Перечисление.ТипыПлатежныхДокументов.ИнкассовоеПоручение)
	|			ТОГДА ""06""
	|		КОГДА ПоступлениеБезналичныхДенежныхСредств.ТипПлатежногоДокумента = ЗНАЧЕНИЕ(Перечисление.ТипыПлатежныхДокументов.ПлатежноеТребование)
	|			ТОГДА ""02""
	|		ИНАЧЕ ""00""
	|	КОНЕЦ,
	|	ПоступлениеБезналичныхДенежныхСредств.Организация.КПП,
	|	ПоступлениеБезналичныхДенежныхСредств.БанковскийСчетОтправитель.Владелец.КПП,
	|	ПоступлениеБезналичныхДенежныхСредств.БанковскийСчетОтправитель.НомерСчета,
	|	ВЫБОР
	|		КОГДА (ВЫРАЗИТЬ(ПоступлениеБезналичныхДенежныхСредств.БанковскийСчетОтправитель.ТекстКорреспондента КАК СТРОКА(255))) = """"
	|			ТОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчетОтправитель.Владелец.НаименованиеСокращенное
	|		ИНАЧЕ ПоступлениеБезналичныхДенежныхСредств.БанковскийСчетОтправитель.ТекстКорреспондента
	|	КОНЕЦ,
	|	ПоступлениеБезналичныхДенежныхСредств.БанковскийСчетОтправитель.Владелец.ИНН,
	|	ВЫБОР
	|		КОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчетОтправитель.РучноеИзменениеРеквизитовБанка = ИСТИНА
	|			ТОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчетОтправитель.НаименованиеБанка
	|		ИНАЧЕ ПоступлениеБезналичныхДенежныхСредств.БанковскийСчетОтправитель.Банк.Наименование
	|	КОНЕЦ,
	|	ВЫБОР
	|		КОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчетОтправитель.РучноеИзменениеРеквизитовБанка = ИСТИНА
	|			ТОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчетОтправитель.ГородБанка
	|		ИНАЧЕ ПоступлениеБезналичныхДенежныхСредств.БанковскийСчетОтправитель.Банк.Город
	|	КОНЕЦ,
	|	ВЫБОР
	|		КОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчетОтправитель.РучноеИзменениеРеквизитовБанка = ИСТИНА
	|			ТОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчетОтправитель.БИКБанка
	|		ИНАЧЕ ПоступлениеБезналичныхДенежныхСредств.БанковскийСчетОтправитель.Банк.Код
	|	КОНЕЦ,
	|	ВЫБОР
	|		КОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчетОтправитель.РучноеИзменениеРеквизитовБанка = ИСТИНА
	|			ТОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчетОтправитель.КоррСчетБанка
	|		ИНАЧЕ ПоступлениеБезналичныхДенежныхСредств.БанковскийСчетОтправитель.Банк.КоррСчет
	|	КОНЕЦ,
	|	ВЫБОР
	|		КОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчетОтправитель.РучноеИзменениеРеквизитовБанка = ИСТИНА
	|			ТОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчетОтправитель.НаименованиеБанкаДляРасчетов
	|		ИНАЧЕ ПоступлениеБезналичныхДенежныхСредств.БанковскийСчетОтправитель.БанкДляРасчетов.Наименование
	|	КОНЕЦ,
	|	ВЫБОР
	|		КОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчетОтправитель.РучноеИзменениеРеквизитовБанка = ИСТИНА
	|			ТОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчетОтправитель.ГородБанкаДляРасчетов
	|		ИНАЧЕ ПоступлениеБезналичныхДенежныхСредств.БанковскийСчетОтправитель.БанкДляРасчетов.Город
	|	КОНЕЦ,
	|	ВЫБОР
	|		КОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчетОтправитель.РучноеИзменениеРеквизитовБанка = ИСТИНА
	|			ТОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчетОтправитель.БИКБанкаДляРасчетов
	|		ИНАЧЕ ПоступлениеБезналичныхДенежныхСредств.БанковскийСчетОтправитель.БанкДляРасчетов.Код
	|	КОНЕЦ,
	|	ВЫБОР
	|		КОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчетОтправитель.РучноеИзменениеРеквизитовБанка = ИСТИНА
	|			ТОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчетОтправитель.КоррСчетБанкаДляРасчетов
	|		ИНАЧЕ ПоступлениеБезналичныхДенежныхСредств.БанковскийСчетОтправитель.БанкДляРасчетов.КоррСчет
	|	КОНЕЦ,
	|	ПоступлениеБезналичныхДенежныхСредств.БанковскийСчет.НомерСчета,
	|	ВЫБОР
	|		КОГДА (ВЫРАЗИТЬ(ПоступлениеБезналичныхДенежныхСредств.БанковскийСчет.ТекстКорреспондента КАК СТРОКА(255))) = """"
	|			ТОГДА ПоступлениеБезналичныхДенежныхСредств.Организация.НаименованиеСокращенное
	|		ИНАЧЕ ПоступлениеБезналичныхДенежныхСредств.БанковскийСчет.ТекстКорреспондента
	|	КОНЕЦ,
	|	ПоступлениеБезналичныхДенежныхСредств.Организация.ИНН,
	|	ВЫБОР
	|		КОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчет.РучноеИзменениеРеквизитовБанка = ИСТИНА
	|			ТОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчет.НаименованиеБанка
	|		ИНАЧЕ ПоступлениеБезналичныхДенежныхСредств.БанковскийСчет.Банк.Наименование
	|	КОНЕЦ,
	|	ВЫБОР
	|		КОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчет.РучноеИзменениеРеквизитовБанка = ИСТИНА
	|			ТОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчет.ГородБанка
	|		ИНАЧЕ ПоступлениеБезналичныхДенежныхСредств.БанковскийСчет.Банк.Город
	|	КОНЕЦ,
	|	ВЫБОР
	|		КОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчет.РучноеИзменениеРеквизитовБанка = ИСТИНА
	|			ТОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчет.БИКБанка
	|		ИНАЧЕ ПоступлениеБезналичныхДенежныхСредств.БанковскийСчет.Банк.Код
	|	КОНЕЦ,
	|	ПоступлениеБезналичныхДенежныхСредств.БанковскийСчет.Банк.КоррСчет,
	|	ВЫБОР
	|		КОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчет.РучноеИзменениеРеквизитовБанка = ИСТИНА
	|			ТОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчет.НаименованиеБанкаДляРасчетов
	|		ИНАЧЕ ПоступлениеБезналичныхДенежныхСредств.БанковскийСчет.БанкДляРасчетов.Наименование
	|	КОНЕЦ,
	|	ВЫБОР
	|		КОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчет.РучноеИзменениеРеквизитовБанка = ИСТИНА
	|			ТОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчет.ГородБанкаДляРасчетов
	|		ИНАЧЕ ПоступлениеБезналичныхДенежныхСредств.БанковскийСчет.БанкДляРасчетов.Город
	|	КОНЕЦ,
	|	ВЫБОР
	|		КОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчет.РучноеИзменениеРеквизитовБанка = ИСТИНА
	|			ТОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчет.БИКБанкаДляРасчетов
	|		ИНАЧЕ ПоступлениеБезналичныхДенежныхСредств.БанковскийСчет.БанкДляРасчетов.Код
	|	КОНЕЦ,
	|	ВЫБОР
	|		КОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчет.РучноеИзменениеРеквизитовБанка = ИСТИНА
	|			ТОГДА ПоступлениеБезналичныхДенежныхСредств.БанковскийСчет.КоррСчетБанкаДляРасчетов
	|		ИНАЧЕ ПоступлениеБезналичныхДенежныхСредств.БанковскийСчет.БанкДляРасчетов.КоррСчет
	|	КОНЕЦ,
	|	ПоступлениеБезналичныхДенежныхСредств.НазначениеПлатежа,
	|	ПоступлениеБезналичныхДенежныхСредств.БанковскийСчет.Владелец,
	|	ПоступлениеБезналичныхДенежныхСредств.ИдентификаторПлатежа,
	|	ПоступлениеБезналичныхДенежныхСредств.БанковскийСчетОтправитель.Владелец
	|ИЗ
	|	Документ.ПоступлениеБезналичныхДенежныхСредств КАК ПоступлениеБезналичныхДенежныхСредств
	|ГДЕ
	|	ПоступлениеБезналичныхДенежныхСредств.ХозяйственнаяОперация В (
	|		ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ПоступлениеДенежныхСредствИзДругойОрганизации),
	|		ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ВозвратДенежныхСредствОтДругойОрганизации),
	|		ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ВнутренняяПередачаДенежныхСредств))
	|	И ПоступлениеБезналичныхДенежныхСредств.Ссылка = &Ссылка
	|";
	
	Запрос.УстановитьПараметр("Ссылка", СсылкаНаОбъект);
	МассивРезультатовЗапроса = Запрос.ВыполнитьПакет();
	
	СтрокаДанных = МассивРезультатовЗапроса[0].Выбрать();
	СтрокаДанных.Следующий();
	
	ЭлектронноеВзаимодействие.ЗаполнитьЗначениеРеквизитаВДереве(ДеревоДокумента, "Дата", СтрокаДанных.Дата);
	ЭлектронноеВзаимодействие.ЗаполнитьЗначениеРеквизитаВДереве(ДеревоДокумента, "Сумма", СтрокаДанных.Сумма);
	
	ЭлектронноеВзаимодействие.ЗаполнитьЗначениеРеквизитаВДереве(ДеревоДокумента, "РеквизитыПолучателя.Наименование", 		СтрокаДанных.РеквизитыПолучателя_Наименование);
	ЭлектронноеВзаимодействие.ЗаполнитьЗначениеРеквизитаВДереве(ДеревоДокумента, "РеквизитыПолучателя.ИНН", 				СтрокаДанных.РеквизитыПолучателя_ИНН);
	ЭлектронноеВзаимодействие.ЗаполнитьЗначениеРеквизитаВДереве(ДеревоДокумента, "РеквизитыПолучателя.КПП", 				СтрокаДанных.РеквизитыПолучателя_КПП);
	ЭлектронноеВзаимодействие.ЗаполнитьЗначениеРеквизитаВДереве(ДеревоДокумента, "РеквизитыПолучателя.РасчСчет", 			СтрокаДанных.РеквизитыПолучателя_РасчСчет);
	ЭлектронноеВзаимодействие.ЗаполнитьЗначениеРеквизитаВДереве(ДеревоДокумента, "РеквизитыПолучателя.Банк.БИК", 			СтрокаДанных.РеквизитыПолучателя_Банк_БИК);
	ЭлектронноеВзаимодействие.ЗаполнитьЗначениеРеквизитаВДереве(ДеревоДокумента, "РеквизитыПолучателя.Банк.Наименование", 	СтрокаДанных.РеквизитыПолучателя_Банк_Наименование);
	ЭлектронноеВзаимодействие.ЗаполнитьЗначениеРеквизитаВДереве(ДеревоДокумента, "РеквизитыПолучателя.Банк.Город", 		СтрокаДанных.РеквизитыПолучателя_Банк_Город);
	ЭлектронноеВзаимодействие.ЗаполнитьЗначениеРеквизитаВДереве(ДеревоДокумента, "РеквизитыПолучателя.Банк.КоррСчет", 		СтрокаДанных.РеквизитыПолучателя_Банк_КоррСчет);
	
	ЭлектронноеВзаимодействие.ЗаполнитьЗначениеРеквизитаВДереве(ДеревоДокумента, "РеквизитыПлательщика.Наименование", 		СтрокаДанных.РеквизитыПлательщика_Наименование);
	ЭлектронноеВзаимодействие.ЗаполнитьЗначениеРеквизитаВДереве(ДеревоДокумента, "РеквизитыПлательщика.ИНН", 				СтрокаДанных.РеквизитыПлательщика_ИНН);
	ЭлектронноеВзаимодействие.ЗаполнитьЗначениеРеквизитаВДереве(ДеревоДокумента, "РеквизитыПлательщика.КПП", 				СтрокаДанных.РеквизитыПлательщика_КПП);
	ЭлектронноеВзаимодействие.ЗаполнитьЗначениеРеквизитаВДереве(ДеревоДокумента, "РеквизитыПлательщика.РасчСчет", 			СтрокаДанных.РеквизитыПлательщика_РасчСчет);
	ЭлектронноеВзаимодействие.ЗаполнитьЗначениеРеквизитаВДереве(ДеревоДокумента, "РеквизитыПлательщика.Банк.БИК", 			СтрокаДанных.РеквизитыПлательщика_Банк_БИК);
	ЭлектронноеВзаимодействие.ЗаполнитьЗначениеРеквизитаВДереве(ДеревоДокумента, "РеквизитыПлательщика.Банк.Наименование", СтрокаДанных.РеквизитыПлательщика_Банк_Наименование);
	ЭлектронноеВзаимодействие.ЗаполнитьЗначениеРеквизитаВДереве(ДеревоДокумента, "РеквизитыПлательщика.Банк.Город", 		СтрокаДанных.РеквизитыПлательщика_Банк_Город);
	ЭлектронноеВзаимодействие.ЗаполнитьЗначениеРеквизитаВДереве(ДеревоДокумента, "РеквизитыПлательщика.Банк.КоррСчет", 	СтрокаДанных.РеквизитыПлательщика_Банк_КоррСчет);
	
	ЭлектронноеВзаимодействие.ЗаполнитьЗначениеРеквизитаВДереве(ДеревоДокумента, "РеквизитыПлатежа.ВидПлатежа", 			"");
	ЭлектронноеВзаимодействие.ЗаполнитьЗначениеРеквизитаВДереве(ДеревоДокумента, "РеквизитыПлатежа.ВидОплаты", 			СтрокаДанных.РеквизитыПлатежа_ВидОплаты);
	ЭлектронноеВзаимодействие.ЗаполнитьЗначениеРеквизитаВДереве(ДеревоДокумента, "РеквизитыПлатежа.Очередность", 			5);
	ЭлектронноеВзаимодействие.ЗаполнитьЗначениеРеквизитаВДереве(ДеревоДокумента, "РеквизитыПлатежа.Код", 					СтрокаДанных.РеквизитыПлатежа_Код);
	ЭлектронноеВзаимодействие.ЗаполнитьЗначениеРеквизитаВДереве(ДеревоДокумента, "РеквизитыПлатежа.НазначениеПлатежа", 	СтрокаДанных.РеквизитыПлатежа_НазначениеПлатежа);
	
	ЭлектронноеВзаимодействие.ЗаполнитьЗначениеРеквизитаВДереве(ДеревоДокумента, "УсловиеОплаты", "2");
	ЭлектронноеВзаимодействие.ЗаполнитьЗначениеРеквизитаВДереве(ДеревоДокумента, "Плательщик", СтрокаДанных.Плательщик);
	
КонецПроцедуры

// Определяет возможно ли редактировать объект информационной базы.
//
// Параметры:
//  СсылкаНаОбъект  - Ссылка - ссылка на проверяемый объект;
//  РедактированиеРазрешено - Булево - возвращает разрешено или нет редактирование.
//
Процедура ПроверитьВозможностьРедактированияОбъекта(СсылкаНаОбъект, РедактированиеРазрешено) Экспорт
	
	РедактированиеРазрешено = Истина;
	
КонецПроцедуры

// Заполняет список команд ЭДО.
// 
// Параметры:
//  СоставКомандЭДО - Массив - например "Документ.ПлатежныйДокумент".
//
Процедура ПодготовитьСтруктуруОбъектовКомандЭДО(СоставКомандЭДО) Экспорт
	
	СоставКомандЭДО.Добавить("Документ.СписаниеБезналичныхДенежныхСредств");
	СоставКомандЭДО.Добавить("Документ.ПоступлениеБезналичныхДенежныхСредств");
	
	СоставКомандЭДО.Добавить("ЖурналДокументов.БезналичныеПлатежи");
	СоставКомандЭДО.Добавить("ЖурналДокументов.Платежи");
	
	СоставКомандЭДО.Добавить("Обработка.ПлатежныйКалендарь");
	
КонецПроцедуры

// Включает тестовый режим обмена в банком.
// При включении тестового режима возможно ручное указание URL сервера для получения настроек обмена.
//
// Параметры:
//    ИспользуетсяТестовыйРежим - Булево - признак использования тестового режима.
//
Процедура ПроверитьИспользованиеТестовогоРежима(ИспользуетсяТестовыйРежим) Экспорт

	Если Найти(ВРег(Константы.ЗаголовокСистемы.Получить()), ВРег("DirectBank"))>0 Тогда
		ИспользуетсяТестовыйРежим = Истина;
	КонецЕсли;
	
КонецПроцедуры

#Область ЗарплатныйПроект

// Вызывается для формирования XML файла в прикладном решении.
//
// Параметры:
//    ОбъектДляВыгрузки - ДокументСсылка - ссылка на документ, на основании которого будет сформирован ЭД.
//    ИмяФайла - Строка - имя сформированного файла.
//    АдресФайла - АдресВременногоХранилища - содержит двоичные данные файла.
//
Процедура ПриФормированииXMLФайла(ОбъектДляВыгрузки, ИмяФайла, АдресФайла) Экспорт
	
КонецПроцедуры

// Формирует табличный документ на основании файла XML для визуального отображения электронного документа.
//
// Параметры:
//  ИмяФайла - Строка - полный путь к файлу XML
//  ТабличныйДокумент - ТабличныйДокумент - возвращаемое значение, визуальное отображение данных файла.
//
Процедура ЗаполнитьТабличныйДокумент(Знач ИмяФайла, ТабличныйДокумент) Экспорт
	
КонецПроцедуры

// Вызывается при получении файла из банка.
//
// Параметры:
//  АдресДанныхФайла - Строка - адрес временного хранилища с двоичными данными файла.
//  ИмяФайла - Строка - формализованное имя файла данных.
//  ОбъектВладелец - ДокументСсылка - (возвращаемый параметр) ссылка на документ, который был создан на основании ЭД.
//  ДанныеОповещения - Структура - (возвращаемый параметр) данные для вызова метода Оповестить на клиенте.
//                 * Ключ - Строка - имя события.
//                 * Значение - Произвольный - параметр сообщения.
Процедура ПриПолученииXMLФайла(АдресДанныхФайла, ИмяФайла, ОбъектВладелец, ДанныеОповещения) Экспорт
	
КонецПроцедуры

// Вызывается при изменении состояния электронного документооборота.
//
// Параметры:
//  СсылкаНаОбъект - ДокументСсылка - владелец электронного документооборота;
//  СостояниеЭД - ПеречислениеСсылка.СостоянияОбменСБанками - новое состояние электронного документооборота.
//
Процедура ПриИзмененииСостоянияЭД(СсылкаНаОбъект, СостояниеЭД) Экспорт
	
	
КонецПроцедуры

#КонецОбласти

#КонецОбласти

