
&НаСервере
Функция СформироватьКП(СсылкиЗаказов)
	
	Возврат Документы.КП.СформироватьКПИзЗаказа(СсылкиЗаказов);
	
КонецФункции

&НаКлиенте
Процедура ОтветМенеджера(Ответ, Ссылки) Экспорт
	
	Если Ответ = КодВозвратаДиалога.Да Тогда
		
		Ссылка = СформироватьКП(Ссылки);
		Если Не Ссылка.Пустая() Тогда
			ПоказатьЗначение(,Ссылка);
			Оповестить("СформированоКПИзЗаказа", Ссылка);
		КонецЕсли;
		
	КонецЕсли;
	
КонецПроцедуры
&НаКлиенте
Процедура ОбработкаКоманды(ПараметрКоманды, ПараметрыВыполненияКоманды)
	
	ПоказатьВопрос(Новый ОписаниеОповещения("ОтветМенеджера", ЭтотОбъект, ПараметрКоманды),"Заказ будет удален, а вместо заказа создано КП,
												|Продолжить?", РежимДиалогаВопрос.ДаНет,,,"Формирование КП из заказа");
КонецПроцедуры
