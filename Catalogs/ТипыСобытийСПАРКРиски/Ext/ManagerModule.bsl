
#Область ОбработчикиСобытий

Процедура ОбработкаПолученияПолейПредставления(Поля, СтандартнаяОбработка)
	
	СтандартнаяОбработка = Ложь;
	Поля.Добавить("Описание");
	
КонецПроцедуры

Процедура ОбработкаПолученияПредставления(Данные, Представление, СтандартнаяОбработка)
	
	СтандартнаяОбработка = Ложь;
	Представление = Данные.Описание;
	
КонецПроцедуры

Процедура ОбработкаПолученияДанныхВыбора(ДанныеВыбора, Параметры, СтандартнаяОбработка)
	
	СтандартнаяОбработка = Ложь;
	Запрос = Новый Запрос(
	"ВЫБРАТЬ
	|	Спр.Название КАК Название,
	|	Спр.Описание КАК Описание,
	|	Спр.Критичное КАК Критичное,
	|	Спр.Ссылка КАК Ссылка
	|ИЗ
	|	Справочник.ТипыСобытийСПАРКРиски КАК Спр
	|ГДЕ
	|	НЕ Спр.ПометкаУдаления
	|
	|УПОРЯДОЧИТЬ ПО
	|	Описание");
	
	ДанныеВыбора = Новый СписокЗначений;
	Выборка = Запрос.Выполнить().Выбрать();
	Пока Выборка.Следующий() Цикл
		
		ПредставлениеСобытия = ?(ПустаяСтрока(Выборка.Описание), Выборка.Название, Выборка.Описание);
		
		Если Выборка.Критичное Тогда
			ДанныеВыбора.Добавить(Выборка.Ссылка,
				ИнтернетПоддержкаПользователейКлиентСервер.ФорматированныйЗаголовок(
					"<body><font color = ""#FF0000"">" + ПредставлениеСобытия + "</span></body>"));
		Иначе
			ДанныеВыбора.Добавить(
				Выборка.Ссылка,
				ПредставлениеСобытия);
		КонецЕсли;
		
	КонецЦикла;
	
КонецПроцедуры

#КонецОбласти
