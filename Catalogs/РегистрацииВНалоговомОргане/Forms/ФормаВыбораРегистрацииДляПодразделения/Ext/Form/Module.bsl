
#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	Если Параметры.Свойство("АвтоТест") Тогда
		Возврат;
	КонецЕсли;
	
	Параметры.Свойство("Организация", Организация);
	Параметры.Свойство("СписокПодразделений", СписокПодразделений);
	
	Если СписокПодразделений.Количество() = 1 Тогда
		ШаблонЗаголовка = НСтр("ru = 'Назначить налоговый орган (%1)'");
		Заголовок = СтроковыеФункцииКлиентСервер.ПодставитьПараметрыВСтроку(
			ШаблонЗаголовка,
			СписокПодразделений[0]);
	Иначе
		ШаблонЗаголовка = НСтр("ru = 'Назначить налоговый орган для %1 подразделений'");
		Заголовок = СтроковыеФункцииКлиентСервер.ПодставитьПараметрыВСтроку(
			ШаблонЗаголовка,
			СписокПодразделений.Количество());
	КонецЕсли;
	
	Элементы.Пероид.Видимость = Параметры.Периодичность;
	
	Период = НачалоМесяца(ТекущаяДатаСеанса());
	
КонецПроцедуры

#КонецОбласти

#Область ОбработчикиКомандФормы

&НаКлиенте
Процедура ОК(Команда)
	
	СтруктураВыбора = Новый Структура("МассивПодразделений, Период, НалоговыйОрган",
		СписокПодразделений.ВыгрузитьЗначения(), Период, НалоговыйОрган);
	
	ОповеститьОВыборе(СтруктураВыбора);
	
КонецПроцедуры

&НаКлиенте
Процедура Отмена(Команда)
	Закрыть();
КонецПроцедуры

#КонецОбласти