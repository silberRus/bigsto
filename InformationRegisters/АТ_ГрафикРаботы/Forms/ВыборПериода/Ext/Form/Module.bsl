
&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	Если ПустаяСтрока(Параметры.ДатаКалендаря) Тогда
		
		СвояДата = Истина;
		
	Иначе
		
		Структура 	= РегистрыСведений.АТ_ГрафикРаботы.ПолучитьСтруктуруДаты(Параметры.ДатаКалендаря);
		СвояДата 	= Структура.СвояДата;
		
		Если СвояДата Тогда
			
			Месяц 	= Структура.Месяц;
			Неделя 	= Структура.Неделя;
			Время 	= Структура.Время;
			
		Иначе
			
			ТиповаяДата = Структура.ТиповаяДата;
		
		КонецЕсли;
	КонецЕсли;
	
КонецПроцедуры

&НаСервере
Функция ПолучитьДатуИПредставление()
	
	ДатаКалендаря = РегистрыСведений.АТ_ГрафикРаботы.ПолучитьДатуКалендаря(
						Новый Структура("СвояДата, Месяц, Неделя, Время, ТиповаяДата", СвояДата, Месяц, Неделя, Время, ТиповаяДата));
	Представление = РегистрыСведений.АТ_ГрафикРаботы.ПредставлениеДаты(ДатаКалендаря);
	
	Возврат Новый Структура("ДатаКалендаря, Представление", ДатаКалендаря, Представление);
	
КонецФункции
&НаКлиенте
Процедура Выбрать(Команда)
	
	Закрыть(ПолучитьДатуИПредставление());
	
КонецПроцедуры


&НаКлиенте
Процедура УправлениеВидимостью()
	
	Элементы.ГруппаСвойФормат.Видимость = СвояДата;
	Элементы.ТиповаяДата.Видимость 		= Не СвояДата;
	
КонецПроцедуры


&НаКлиенте
Процедура СвойФорматПриИзменении(Элемент)
	
	УправлениеВидимостью();
	
КонецПроцедуры

&НаКлиенте
Процедура ПриОткрытии(Отказ)
	
	УправлениеВидимостью();
	
КонецПроцедуры